<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-defaultDoc/Java/å¹¶å‘ç¼–ç¨‹" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">å¹¶å‘ç¼–ç¨‹ | INFO.CENTER</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://cnjszzw.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://cnjszzw.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://cnjszzw.github.io/docs/defaultDoc/Java/å¹¶å‘ç¼–ç¨‹"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="å¹¶å‘ç¼–ç¨‹ | INFO.CENTER"><meta data-rh="true" name="description" content="åŸºç¡€"><meta data-rh="true" property="og:description" content="åŸºç¡€"><link data-rh="true" rel="icon" href="/img/my-logo.svg"><link data-rh="true" rel="canonical" href="https://cnjszzw.github.io/docs/defaultDoc/Java/å¹¶å‘ç¼–ç¨‹"><link data-rh="true" rel="alternate" href="https://cnjszzw.github.io/docs/defaultDoc/Java/å¹¶å‘ç¼–ç¨‹" hreflang="en"><link data-rh="true" rel="alternate" href="https://cnjszzw.github.io/docs/defaultDoc/Java/å¹¶å‘ç¼–ç¨‹" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="INFO.CENTER RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="INFO.CENTER Atom Feed">





<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)"><link rel="stylesheet" href="/assets/css/styles.2139ebb5.css">
<script src="/assets/js/runtime~main.f6ddbcf5.js" defer="defer"></script>
<script src="/assets/js/main.af8d0fee.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/my-logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/my-logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/my-logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">INFO.CENTER</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/defaultDoc/Intro">æ–‡æ¡£ğŸ“’</a><a class="navbar__item navbar__link" href="/docs/musicDoc/Test">éŸ³ä¹ğŸµ</a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><a href="https://cnjszzw.github.io/cv/zh-cn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">OhMyCV<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/Cnjszzw" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/defaultDoc/Intro">æŠ€æœ¯æ–‡æ¡£ä¸­å¿ƒ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/ç®—æ³•">ç®—æ³•</a><button aria-label="Expand sidebar category &#x27;ç®—æ³•&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/java">Java</a><button aria-label="Collapse sidebar category &#x27;Java&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/defaultDoc/Java/JVM">JVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/defaultDoc/Java/åŠ¨æ€ä»£ç†">åŠ¨æ€ä»£ç†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/defaultDoc/Java/å¹¶å‘ç¼–ç¨‹">å¹¶å‘ç¼–ç¨‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/defaultDoc/Java/é›†åˆ">Javaé›†åˆ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/é¡¹ç›®">é¡¹ç›®</a><button aria-label="Expand sidebar category &#x27;é¡¹ç›®&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/æ¶ˆæ¯é˜Ÿåˆ—">æ¶ˆæ¯é˜Ÿåˆ—</a><button aria-label="Expand sidebar category &#x27;æ¶ˆæ¯é˜Ÿåˆ—&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/-docusaurus"> Docusaurus</a><button aria-label="Expand sidebar category &#x27; Docusaurus&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/defaultDoc/2025æ˜¥æ‹›">2025æ˜¥æ‹›</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/defaultDoc/HRé¢è¯•æŒ‡å—">HR é¢è¯•æŒ‡å—</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/defaultDoc/MyBatis">MyBatis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/defaultDoc/MySQL">MySQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/defaultDoc/Redis">Redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/defaultDoc/SpringBoot">SpringBoot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/defaultDoc/SpringCloud">å¾®æœåŠ¡æ¶æ„</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/defaultDoc/è®¡ç®—æœºç½‘ç»œ">è®¡ç®—æœºç½‘ç»œ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/defaultDoc/è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/defaultDoc/é¢è¯•è®°å½•">é¢è¯•æ€»ç»“</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/defaultDoc/é¢†åŸŸé©±åŠ¨è®¾è®¡">é¢†åŸŸé©±åŠ¨è®¾è®¡</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/java"><span itemprop="name">Java</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">å¹¶å‘ç¼–ç¨‹</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>å¹¶å‘ç¼–ç¨‹</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŸºç¡€">åŸºç¡€<a href="#åŸºç¡€" class="hash-link" aria-label="Direct link to åŸºç¡€" title="Direct link to åŸºç¡€">â€‹</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«">1.çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«ï¼Ÿ<a href="#1çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«" class="hash-link" aria-label="Direct link to 1.çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«ï¼Ÿ" title="Direct link to 1.çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«ï¼Ÿ">â€‹</a></h2>
<p>è¿›ç¨‹æ˜¯ä¸€ä¸ªç¨‹åºè¿è¡Œçš„å®ä¾‹ï¼Œæ¯ä¸ªè¿›ç¨‹åŒ…å«äº†å¤šä¸ªçº¿ç¨‹ï¼Œç„¶åçº¿ç¨‹ä¹‹é—´å¯ä»¥å…±äº«åŒä¸€ä¸ªè¿›ç¨‹ä¸‹çš„å…±äº«å†…å­˜ç©ºé—´ã€‚ç›¸æ¯”äºè¿›ç¨‹æ¥è¯´ï¼Œçº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œä¹Ÿå°±æ˜¯ä»ä¸€ä¸ªçº¿ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œä»–çš„ä¸Šä¸‹æ–‡å¼€é”€ä¼šä½ä¸€äº›ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2å¹¶è¡Œä¸å¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«">2.å¹¶è¡Œä¸å¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<a href="#2å¹¶è¡Œä¸å¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«" class="hash-link" aria-label="Direct link to 2.å¹¶è¡Œä¸å¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" title="Direct link to 2.å¹¶è¡Œä¸å¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ">â€‹</a></h2>
<p>ç°ä»£è®¡ç®—æœºåŸºæœ¬ä¸Šéƒ½æ˜¯å¤šæ ¸å¿ƒçš„cpuï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¹¶å‘æ˜¯æŒ‡çš„å¤šä¸ªçº¿ç¨‹è½®æµå»ä½¿ç”¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªcpuï¼Œæ˜¯ä¸è¿‡è¿™ä¸ªæ—¶é—´ç‰‡å¾ˆçŸ­ï¼Œä¼šç»™äººé€ æˆç¨‹åºéƒ½æ˜¯åŒæ—¶è¿è¡Œçš„é”™è§‰ã€‚å¹¶è¡Œåˆ™æ˜¯æŒ‡çš„ï¼Œä¾‹å¦‚4ä¸ªcpuï¼Œæ¯ä¸ªcpuåŒæ—¶å»æ‰§è¡Œä¸åŒçš„çº¿ç¨‹ä»»åŠ¡ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼æœ‰å“ªäº›æœ‰ä»€ä¹ˆåŒºåˆ«">3.åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<a href="#3åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼æœ‰å“ªäº›æœ‰ä»€ä¹ˆåŒºåˆ«" class="hash-link" aria-label="Direct link to 3.åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" title="Direct link to 3.åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ">â€‹</a></h2>
<p>ç›®å‰æœ‰å››ç§åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ï¼Œç¬¬ä¸€ç§ç›´æ¥ç»§æ‰¿Threadç±»ï¼Œç¬¬äºŒç§ç›´æ¥å®ç°Runnableæ¥å£ï¼Œç¬¬ä¸‰ç§ç›´æ¥å®ç°Callableæ¥å£ï¼Œç¬¬å››ç§ç›´æ¥åˆ©ç”¨çº¿ç¨‹æ± ã€‚å…¶ä¸­Runnableæ˜¯ä¸å¯ä»¥è·å–åˆ°çº¿ç¨‹æ‰§è¡Œçš„è¿”å›ç»“æœçš„ï¼Œä½†æ˜¯Callableå¯ä»¥è·å–ï¼Œä¸»è¦æ˜¯é€šè¿‡Futuretasklæ¥è¿›è¡Œè·å–ï¼Œå¹¶ä¸”ç¬¬ä¸€ç§Runnableä¸­çš„runæ–¹æ³•æ˜¯æ— æ³•æŠ›å‡ºå¼‚å¸¸çš„ï¼Œåªèƒ½é€šè¿‡try-catchæ¥å»æ•è·å¼‚å¸¸ï¼Œä½†æ˜¯Callableä¸­çš„callæ–¹æ³•å¯ä»¥æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//ç»§æ‰¿Threadç±»</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyThread</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;MyThread...run...&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»ºMyThreadå¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">MyThread</span><span class="token plain"> t1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MyThread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">MyThread</span><span class="token plain"> t2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MyThread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// è°ƒç”¨startæ–¹æ³•å¯åŠ¨çº¿ç¨‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//å®ç°Runnableæ¥å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyRunnable</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">Runnable</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;MyRunnable...run...&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»ºMyRunnableå¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">MyRunnable</span><span class="token plain"> mr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MyRunnable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»ºThreadå¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Thread</span><span class="token plain"> t1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Thread</span><span class="token plain"> t2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// è°ƒç”¨startæ–¹æ³•å¯åŠ¨çº¿ç¨‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//å®ç°Callableæ¥å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyCallable</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">Callable</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">call</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">currentThread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ok&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">ExecutionException</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">InterruptedException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»ºMyCallableå¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">MyCallable</span><span class="token plain"> mc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MyCallable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»ºFutureTask</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">FutureTask</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> ft </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">FutureTask</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»ºThreadå¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Thread</span><span class="token plain"> t1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ft</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Thread</span><span class="token plain"> t2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ft</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// è°ƒç”¨startæ–¹æ³•å¯åŠ¨çº¿ç¨‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// è°ƒç”¨ftçš„getæ–¹æ³•è·å–æ‰§è¡Œç»“æœ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">String</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ft</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// è¾“å‡º</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//çº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyExecutors</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">Runnable</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;MyRunnable...run...&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»ºçº¿ç¨‹æ± å¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">ExecutorService</span><span class="token plain"> threadPool </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Executors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newFixedThreadPool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// æäº¤ä»»åŠ¡åˆ°çº¿ç¨‹æ± </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        threadPool</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">submit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MyExecutors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// å…³é—­çº¿ç¨‹æ± </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        threadPool</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shutdown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4çº¿ç¨‹ç±»ä¸­çš„runå’Œstartæ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«">4.çº¿ç¨‹ç±»ä¸­çš„run()å’Œstart()æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<a href="#4çº¿ç¨‹ç±»ä¸­çš„runå’Œstartæ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«" class="hash-link" aria-label="Direct link to 4.çº¿ç¨‹ç±»ä¸­çš„run()å’Œstart()æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" title="Direct link to 4.çº¿ç¨‹ç±»ä¸­çš„run()å’Œstart()æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ">â€‹</a></h2>
<p>run()æ–¹æ³•ä¸­çš„æ˜¯çº¿ç¨‹å»æ‰§è¡Œçš„é€»è¾‘æ–¹æ³•ï¼Œç›´æ¥è°ƒç”¨runæ–¹æ³•çš„è¯ï¼Œä¼šæŠŠè¿™ä¸ªrun()æ–¹æ³•å½“æˆä¸€ä¸ªæ™®é€šæ–¹æ³•å»æ‰§è¡Œï¼Œå¯ä»¥æ‰§è¡Œå¤šæ¬¡ï¼Œä½†æ˜¯start()æ–¹æ³•æ˜¯æ‰§è¡Œçº¿ç¨‹çš„æ–¹æ³•ï¼Œä»–åªèƒ½å»æ‰§è¡Œä¸€æ¬¡ï¼Œæ‰§è¡Œå¤šæ¬¡ä¼šæŠ¥é”™ï¼Œä¹‹åå›å»æ‰§è¡Œçº¿ç¨‹ä¸­çš„run()æ–¹æ³•ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5çº¿ç¨‹åŒ…æ‹¬å“ªäº›çŠ¶æ€çŠ¶æ€ä¹‹é—´æ˜¯å¦‚ä½•å˜åŒ–çš„">5.çº¿ç¨‹åŒ…æ‹¬å“ªäº›çŠ¶æ€ï¼ŒçŠ¶æ€ä¹‹é—´æ˜¯å¦‚ä½•å˜åŒ–çš„ï¼Ÿ<a href="#5çº¿ç¨‹åŒ…æ‹¬å“ªäº›çŠ¶æ€çŠ¶æ€ä¹‹é—´æ˜¯å¦‚ä½•å˜åŒ–çš„" class="hash-link" aria-label="Direct link to 5.çº¿ç¨‹åŒ…æ‹¬å“ªäº›çŠ¶æ€ï¼ŒçŠ¶æ€ä¹‹é—´æ˜¯å¦‚ä½•å˜åŒ–çš„ï¼Ÿ" title="Direct link to 5.çº¿ç¨‹åŒ…æ‹¬å“ªäº›çŠ¶æ€ï¼ŒçŠ¶æ€ä¹‹é—´æ˜¯å¦‚ä½•å˜åŒ–çš„ï¼Ÿ">â€‹</a></h2>
<p><img decoding="async" loading="lazy" alt="image-20241108203248260" src="/assets/images/image-20241106225752489-af827df57e30d7f386c8a58641de479b.png" width="1285" height="645" class="img_ev3q">
çº¿ç¨‹ä¸€å…±æœ‰å…­ç§çŠ¶æ€ã€‚é¦–å…ˆå½“ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨start()æ–¹æ³•å¯åŠ¨åï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹å¯¹è±¡ï¼Œè¿™ä¸ªæ—¶å€™ä¼šè¿›å…¥ä¸€ä¸ªæ‰€è°“çš„Newæ–°å»ºçŠ¶æ€ï¼Œè¿™æ˜¯ç¬¬ä¸€ä¸ªçŠ¶æ€ã€‚ç´§æ¥ç€çº¿ç¨‹éœ€è¦è·å–cpuçš„æ—¶é—´ç‰‡èµ„æºå»æ‰§è¡Œï¼Œå› æ­¤ä¼šç´§æ¥ç€è¿›å…¥ä¸€ä¸ªRunnableè¿è¡ŒçŠ¶æ€ï¼Œè¿™ä¸ªçŠ¶æ€ä¸­åˆåˆ†ä¸ºä¸¤ä¸ªå°çŠ¶æ€ï¼Œå°±ç»ªçŠ¶æ€å’Œè¿™ä¸ªè¿è¡ŒçŠ¶æ€ï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½ä¼šé¦–å…ˆè¿›å…¥å°±ç»ªçŠ¶æ€æ’é˜Ÿç­‰å¾—cpuçš„æ—¶é—´ç‰‡èµ„æºåˆ†é…ï¼Œåˆ†é…åˆ°äº†å°±å»è¿è¡ŒçŠ¶æ€æ‰§è¡Œï¼Œæ‰§è¡Œç»“æŸäº†å°±è¿›å…¥termantedæ­»äº¡æ€æˆ–è€…ç»“æŸæ€ï¼Œè¿™æ˜¯ç¬¬ä¸‰ä¸ªçŠ¶æ€ã€‚è¿™éƒ½æ˜¯æ¯”è¾ƒæ­£å¸¸çš„æµç¨‹ï¼Œä½†æ˜¯åœ¨è¿‡ç¨‹ä¸­ï¼Œä¼šé‡åˆ°å¾ˆå¤šæƒ…å†µï¼Œæ¯”å¦‚è¯´å¦‚æœå½“å‰è¿›ç¨‹é‡åˆ°è¿™ä¸ªé”çš„ä»£ç äº†ï¼Œå°±ä¼šç­‰å¾…é”çš„é‡Šæ”¾ï¼Œç”±æ­¤è¿›å…¥é˜»å¡æ€Bolckedï¼Œè¿™æ˜¯ç¬¬å››ä¸ªçŠ¶æ€ã€‚å¦‚æœé‡åˆ°sleep(5000)è¿™ç§ä»£ç å°±ä¼šä¼‘çœ 5sï¼Œè¿›å…¥ä¸€ä¸ªè¿™ä¸ªæ—¶é—´ç­‰å¾…çŠ¶æ€ï¼Œè¿™ä¸ªæ˜¯ç¬¬äº”ä¸ªçŠ¶æ€ã€‚å¦‚æœè¯¥çº¿ç¨‹è¢«æ‰§è¡Œäº†wait()æ–¹æ³•ä¹Ÿä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°è¯¥çº¿ç¨‹è¢«è°ƒç”¨äº†notify()æ–¹æ³•è¢«å”¤é†’ï¼Œè¿™ä¸ªæ˜¯ç¬¬å…­ä¸ªçŠ¶æ€ï¼Œåä¸‰ä¸ªé€šå¸¸ä¸ºé˜»å¡æˆ–è€…ç­‰å¾…çŠ¶æ€ï¼Œéœ€è¦ä¸€å®šçš„æœºåˆ¶æ‰èƒ½å›åˆ°è¿è¡Œæ€ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6å¦‚ä½•è®©çº¿ç¨‹æŒ‰ç…§æŒ‡å®šçš„é¡ºåºå»æ‰§è¡Œå‘¢">6.å¦‚ä½•è®©çº¿ç¨‹æŒ‰ç…§æŒ‡å®šçš„é¡ºåºå»æ‰§è¡Œå‘¢ï¼Ÿ<a href="#6å¦‚ä½•è®©çº¿ç¨‹æŒ‰ç…§æŒ‡å®šçš„é¡ºåºå»æ‰§è¡Œå‘¢" class="hash-link" aria-label="Direct link to 6.å¦‚ä½•è®©çº¿ç¨‹æŒ‰ç…§æŒ‡å®šçš„é¡ºåºå»æ‰§è¡Œå‘¢ï¼Ÿ" title="Direct link to 6.å¦‚ä½•è®©çº¿ç¨‹æŒ‰ç…§æŒ‡å®šçš„é¡ºåºå»æ‰§è¡Œå‘¢ï¼Ÿ">â€‹</a></h2>
<p>ä¸»è¦æ˜¯é€šè¿‡joinå‡½æ•°ï¼Œè¯¥æ–¹æ³•éœ€è¦ç­‰å¾…çº¿ç¨‹è¿è¡Œç»“æŸ</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">JoinTest</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">InterruptedException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Thread</span><span class="token plain"> t1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;t1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Thread</span><span class="token plain"> t2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                t1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                          </span><span class="token comment" style="color:#999988;font-style:italic">// åŠ å…¥çº¿ç¨‹t1,åªæœ‰t1çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä»¥åï¼Œå†æ¬¡æ‰§è¡Œè¯¥çº¿ç¨‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">InterruptedException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">printStackTrace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;t2&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Thread</span><span class="token plain"> t3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                t2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                              </span><span class="token comment" style="color:#999988;font-style:italic">// åŠ å…¥çº¿ç¨‹t2,åªæœ‰t2çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä»¥åï¼Œå†æ¬¡æ‰§è¡Œè¯¥çº¿ç¨‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">InterruptedException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">printStackTrace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;t3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// å¯åŠ¨çº¿ç¨‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t3</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7notifyå’Œnotifyallçš„åŒºåˆ«">7.notify()å’ŒnotifyAll()çš„åŒºåˆ«ï¼Ÿ<a href="#7notifyå’Œnotifyallçš„åŒºåˆ«" class="hash-link" aria-label="Direct link to 7.notify()å’ŒnotifyAll()çš„åŒºåˆ«ï¼Ÿ" title="Direct link to 7.notify()å’ŒnotifyAll()çš„åŒºåˆ«ï¼Ÿ">â€‹</a></h2>
<p>notifyæ˜¯å»å”¤é†’éšæœºçš„ä¸€ä¸ªwait()çš„çº¿ç¨‹ï¼Œä½†æ˜¯notifyAll()æ˜¯å»å”¤é†’æ‰€æœ‰é˜¿wait()çš„çº¿ç¨‹ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="8åœ¨javaä¸­waitå’Œè¿™ä¸ªsleepæ–¹æ³•æœ‰ä½•ä¸åŒ">8.åœ¨javaä¸­ï¼Œwait()å’Œè¿™ä¸ªsleep()æ–¹æ³•æœ‰ä½•ä¸åŒï¼Ÿ<a href="#8åœ¨javaä¸­waitå’Œè¿™ä¸ªsleepæ–¹æ³•æœ‰ä½•ä¸åŒ" class="hash-link" aria-label="Direct link to 8.åœ¨javaä¸­ï¼Œwait()å’Œè¿™ä¸ªsleep()æ–¹æ³•æœ‰ä½•ä¸åŒï¼Ÿ" title="Direct link to 8.åœ¨javaä¸­ï¼Œwait()å’Œè¿™ä¸ªsleep()æ–¹æ³•æœ‰ä½•ä¸åŒï¼Ÿ">â€‹</a></h2>
<p>wait()å’Œsleep()éƒ½å¯ä»¥è®©çº¿ç¨‹è¿›å…¥é˜»å¡æˆ–è€…ç­‰å¾…è¿™ç§æš‚æ—¶ä¸å¯ä»¥æ‰§è¡Œçš„çŠ¶æ€ï¼Œè¿™æ˜¯ä»–ä»¬çš„å…±åŒç‚¹ï¼Œé’ˆå¯¹äºä¸åŒç‚¹ï¼Œç”±ä¸‰ä¸ªæ–¹é¢ã€‚ç¬¬ä¸€ä¸ªæ–¹é¢æ˜¯wait()æ˜¯Objectå¯¹è±¡ç±»å†…ç½®çš„æ–¹æ³•ï¼Œè€Œè¿™ä¸ªsleep()æ–¹æ³•æ˜¯è¿™ä¸ªThreadç±»çš„é™æ€æ–¹æ³•ã€‚ç¬¬äºŒç‚¹ï¼Œwaitï¼ˆ50)æˆ–è€…Sleep(50)ä»–ä»¬éƒ½å¯ä»¥åœ¨æ—¶é—´åˆ°äº†ä¹‹åå°±è‡ªå·±é†’è¿‡æ¥ï¼Œä½†æ˜¯wait()æ–¹æ³•ä¸åŠ å‚æ•°ï¼Œå¦‚æœä¸è¢«å”¤é†’å°±ä¼šä¸€ç›´ç¡çœ ä¸‹å»ã€‚ç¬¬ä¸‰ç‚¹æ˜¯å…³äºé”çš„ï¼Œwait()æ–¹æ³•å¿…é¡»æ­é…wait()å¯¹è±¡çš„é”æ¥å»ä½¿ç”¨ï¼Œæ¯”å¦‚è¯´synchronized()ï¼Œå¹¶ä¸”å½“è¿™ä¸ªwaitï¼ˆï¼‰æ‰§è¡Œçš„æ—¶å€™ï¼Œwaitï¼ˆï¼‰ä¼šå»é‡Šæ”¾waitï¼ˆï¼‰çš„é”ï¼Œè®©åˆ«çš„ä»£ç ä¹Ÿå¯ä»¥è·å–è¿™æŠŠé”å»æ‰§è¡Œï¼Œä½†æ˜¯sleepå°±ä¸è¡Œäº†ï¼Œå³ä½¿ç¡çœ äº†ï¼Œè¿™ä¸ªé”ä¹Ÿä¸ä¼šè¢«é‡Šæ”¾ï¼Œåˆ«çš„çº¿ç¨‹è·å–ä¸äº†è¿™æŠŠé”ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="9å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹">9.å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ<a href="#9å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹" class="hash-link" aria-label="Direct link to 9.å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ" title="Direct link to 9.å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ">â€‹</a></h2>
<p>æœ‰ä¸‰ç§æ–¹å¼æ¥ç»“æŸä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Œç¬¬ä¸€ç§æ–¹å¼å°±æ˜¯ç­‰å¾…è¿™ä¸ªçº¿ç¨‹çš„runæ–¹æ³•å»æ­£å¸¸å¾—æ‰§è¡Œç»“æŸã€‚ç¬¬äºŒç§æ–¹æ³•å°±æ˜¯å¼ºè¡Œè°ƒç”¨çº¿ç¨‹å¾—stopæ–¹æ³•ï¼Œè¿™ä¸ªå·²ç»è¢«å®˜æ–¹ä¸æ¨èäº†ã€‚ç¬¬ä¸‰ç§æ–¹æ³•å°±æ˜¯å»è°ƒç”¨interruptæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåœæ­¢è¿è¡Œå¾—çº¿ç¨‹å¾—åŒæ—¶ï¼ŒæŠ›å‡ºç›¸åº”çš„å¼‚å¸¸ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="çº¿ç¨‹å®‰å…¨">çº¿ç¨‹å®‰å…¨<a href="#çº¿ç¨‹å®‰å…¨" class="hash-link" aria-label="Direct link to çº¿ç¨‹å®‰å…¨" title="Direct link to çº¿ç¨‹å®‰å…¨">â€‹</a></h2>
<p>é¦–å…ˆï¼Œå¯ä»¥å›é¡¾ä¸€ä¸‹ä¸€ä¸ªsynchronizedå…³é”®å­—çš„åŸºæœ¬ä½¿ç”¨ç”¨æ³•</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//Synchronizedå¯¹è±¡é”é‡‡ç”¨äº’æ–¥çš„æ–¹å¼è®©åŒä¸€æ—¶åˆ»è‡³å¤šåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æŒæœ‰[å¯¹è±¡é”],</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//å…¶å®ƒçº¿ç¨‹å†æƒ³è·å–è¿™ä¸ª[å¯¹è±¡é”]æ—¶å°±ä¼šé˜»å¡ä½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token plain"> lock </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> ticketNum </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getTicket</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">synchronized</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ticketNum </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">currentThread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;æŠ¢åˆ°ä¸€å¼ ç¥¨,å‰©ä½™:&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> ticketNum</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// éåŸå­æ€§æ“ä½œ ticketNum--;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">TicketDemo</span><span class="token plain"> ticketDemo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">TicketDemo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ticketDemo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getTicket</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1synchronizedå…³é”®è¯çš„åº•å±‚åŸç†">1.synchronizedå…³é”®è¯çš„åº•å±‚åŸç†ï¼Ÿ<a href="#1synchronizedå…³é”®è¯çš„åº•å±‚åŸç†" class="hash-link" aria-label="Direct link to 1.synchronizedå…³é”®è¯çš„åº•å±‚åŸç†ï¼Ÿ" title="Direct link to 1.synchronizedå…³é”®è¯çš„åº•å±‚åŸç†ï¼Ÿ">â€‹</a></h2>
<p>é¦–å…ˆè¿™ä¸ªsynchronizedè¿™ä¸ªå¯¹è±¡é”æ˜¯é‡‡ç”¨äº’æ–¥çš„é€»è¾‘æ¥å®ç°åŒä¸€ä¸ªæ—¶åˆ»ï¼Œæœ€å¤šåªæœ‰ä¸€ä¸ªçº¿ç¨‹æ¥æŒæœ‰å¯¹è±¡æ‰€ï¼Œèµ·åº•å±‚ä¸»è¦æ˜¯é€šè¿‡è¿™ä¸ªmonitoræ¥å®ç°çš„ï¼Œè¿™ä¸ªmonitoræ˜¯jvmå†…å­˜ç•Œåˆ«çš„ç»“æ„ï¼Œä¸»è¦æ˜¯é€šè¿‡C++æ¥å»åº•å±‚å®ç°çš„ï¼Œå¯¹äºmonitorï¼Œé‡Œé¢ä¸»è¦æœ‰ä¸‰ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªå°±æ˜¯è¿™ä¸ªownerï¼Œè¿™ä¸ªä¸»è¦æ˜¯æŒ‡å‘å½“å‰æŒæœ‰æå¯¹è±¡é”çš„çº¿ç¨‹ï¼Œæœ€å¤šåªèƒ½æŒ‡å‘ä¸€ä¸ªï¼Œè¿˜æœ‰ä¸¤ä¸ªå°±æ˜¯entrylistå’Œwaitinglistï¼Œå‰è€…æ˜¯å…¶ä»–çš„æ‰€æœ‰æƒ³è·å–å½“å‰é”ä½†æ˜¯æš‚æ—¶æ— æ³•è·å–çš„çº¿ç¨‹ï¼Œéƒ½ä¼šè¢«æš‚æ—¶æ”¾åˆ°è¿™ä¸ªentrylistä¸­ï¼Œåç»­é”è¢«é‡Šæ”¾äº†ï¼Œæœ‰è¿™äº›entrylistä¸­çš„çº¿ç¨‹å»äº‰æŠ¢ï¼Œwaitingliståˆ™ä¼šå­˜æ”¾è¿™ä¸ªæ€äº‹è¢«é˜»å¡çš„ä¸€äº›çº¿ç¨‹ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2monitorå®ç°çš„é”å±äºé‡é‡çº§é”ä½ äº†è§£è¿‡é”å‡çº§å—">2.Monitorå®ç°çš„é”å±äºé‡é‡çº§é”ï¼Œä½ äº†è§£è¿‡é”å‡çº§å—ï¼Ÿ<a href="#2monitorå®ç°çš„é”å±äºé‡é‡çº§é”ä½ äº†è§£è¿‡é”å‡çº§å—" class="hash-link" aria-label="Direct link to 2.Monitorå®ç°çš„é”å±äºé‡é‡çº§é”ï¼Œä½ äº†è§£è¿‡é”å‡çº§å—ï¼Ÿ" title="Direct link to 2.Monitorå®ç°çš„é”å±äºé‡é‡çº§é”ï¼Œä½ äº†è§£è¿‡é”å‡çº§å—ï¼Ÿ">â€‹</a></h2>
<p>Javaä¸­çš„synchronizedæœ‰ä¸‰ç§é”çš„å®ç°æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯è¿™ä¸ªé‡é‡çº§é”ï¼Œè½»é‡çº§é”å’Œè¿™ä¸ªåå‘é”ã€‚ç¬¬ä¸€ä¸ªå…³äºè¿™ä¸ªé‡é‡çº§é”ï¼Œä»–é€‚ç”¨äºæœ‰å¤šä¸ªé”ç«äº‰åŒä¸€ä¸ªé”å¯¹è±¡çš„åœºæ™¯ï¼Œç”±äºè¿™ä¸ªmonitoræ˜¯jvmçº§åˆ«çš„ï¼Œæ‰€ä»¥ä¼šæ¶‰åŠåˆ°javaä»£ç çº§åˆ«çš„ç”¨æˆ·æ€å’Œç³»ç»Ÿåº•å±‚C++çº§åˆ«çš„å†…æ ¸æ€çš„åˆ‡æ¢ï¼Œè¿™ä¸ªä¸Šä¸‹æ–‡çš„åˆ‡æ¢ï¼Œå¼€é”€ç‰¹åˆ«å¤§ã€‚å…¶æ¬¡å°±æ˜¯è¿™ä¸ªè½»é‡çº§é”ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œå³ä½¿æœ‰é”ï¼Œä½†æ˜¯ä¸ä¼šå­˜åœ¨è¿™ç§ç«äº‰çš„åœºæ™¯ï¼Œæ¯”å¦‚ï¼Œè™½ç„¶æœ‰ä¸€ä¸ªå¯¹è±¡é”ï¼Œè¿™ä¸ªæ—¶å€™æœ‰ä¸‰ä¸ªçº¿ç¨‹ï¼Œä»–ä»¬çš„çš„æ‰§è¡Œéƒ½æ˜¯ï¼Œçº¿ç¨‹1å…ˆè·å–é”ç„¶åå»æ‰§è¡Œï¼Œç„¶åçº¿ç¨‹2è·å–é”å»æ‰§è¡Œï¼Œæœ€åçº¿ç¨‹3è·å–é”å»æ‰§è¡Œï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œç”¨è¿™ä¸ªåŸºäºMonitorçš„é‡é‡çº§é”ï¼Œå¼€é”€å¾ˆå¤§ï¼Œæ‰€ä»¥å¼•å…¥äº†è¿™ä¸ªè½»é‡çº§é”ï¼Œå®ƒå¯ä»¥é¦–å…ˆè·å–è¿™ä¸ªé”å¯¹è±¡ä¸­çš„markedwordç»“æ„ä¸­çš„å¯¹è±¡ï¼Œè¿™ä¸ªä¸»è¦æ˜¯å¯¹è±¡Objectä¸­å¯¹è±¡å¤´ä¸­çš„ä¿¡æ¯ï¼Œä»–è®°å½•äº†å½“å‰å¯¹è±¡çš„é”çš„ä¸€äº›æƒ…å†µï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–çš„é”ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œä¼šåœ¨å½“å‰çº¿ç¨‹çš„æ ˆå¸§ä¸­å‹å…¥ä¸€ä¸ªé”çš„ä¿¡æ¯ï¼Œå¹¶ä¸”åˆ©ç”¨casè¿›è¡Œä¸€ä¸ªåŸå­æ€§çš„äº¤æ¢æ“ä½œï¼Œå°†markedwordä¸­çš„é”çš„ä¿¡æ¯å’Œå½“å‰è¿™ä¸ªçº¿ç¨‹æ¡Ÿå¸§ä¸­çš„é”çš„ä¿¡æ¯è¿›è¡Œäº¤æ¢ï¼Œè¿™æ ·ï¼Œè¿™ä¸ªçº¿ç¨‹çš„æ¡Ÿå¸§å°±æœ‰äº†objectmarkedwordæˆ–è€…è¯´è¿™ä¸ªé”çš„åœ°å€ï¼Œè€Œmarekdworkä¹Ÿè®°å½•äº†é”çš„ä¿¡æ¯ï¼Œè¡¨æ˜äº†å½“å‰æ˜¯ä¸€ä¸ªè½»é‡çº§é”ã€‚ç¬¬ä¸‰ä¸ªå°±æ˜¯è¿™ä¸ªåå‘é”ï¼Œä»–ä¸»è¦æ˜¯å¯¹è¿™ä¸ªè½»é‡çº§é”çš„è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå› ä¸ºæœ‰å¾ˆå¤šåœºæ™¯ï¼Œå…¶å®åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿™ä¸€ä¸ªçº¿ç¨‹å†é‡å¤çš„è·å–ä¸€ä¸ªé”ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„å¯é‡å…¥é”ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœè¿˜ç”¨è½»é‡çº§é”ï¼Œå°±ä¼šå¤šæ¬¡å»åˆ©ç”¨casæ“ä½œå»äº¤æ¢ä¿®æ”¹é”çš„ä¿¡æ¯ï¼Œä½†æ˜¯è¿™ä¸ªä¹Ÿä¼šé€ æˆè¿™ä¸ªå¼€é”€ï¼Œæ‰€ä»¥è¿™ä¸ªåå‘é”ï¼Œåªä¼šåœ¨ç¬¬ä¸€æ¬¡çš„æ—¶å€™è¿›è¡Œè¿™ä¸ªcasæ“ä½œï¼Œåœ¨ä¹‹åçš„æ“ä½œä¸­ï¼Œåªä¼šåˆ¤æ–­å½“å‰è·å–é”çš„idæ˜¯ä¸æ˜¯å·²ç»è·å–è¿‡å½“å‰é”çš„ï¼Œè·å–è¿‡æ¥åªä¼šä»…ä»…åšä¸€ä¸ªè®°å½•ï¼Œä¸ä¼šå†è¿›è¡Œè¿™ä¸ªç¬¬äºŒæ¬¡çš„casæ“ä½œ</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3jmmäº†è§£å—javaå†…å­˜æ¨¡å‹-ps-ä¸æ˜¯javaå†…å­˜ç»“æ„">3.JMMäº†è§£å—ï¼Ÿï¼ˆJavaå†…å­˜æ¨¡å‹ PS ï¼šä¸æ˜¯Javaå†…å­˜ç»“æ„ï¼‰<a href="#3jmmäº†è§£å—javaå†…å­˜æ¨¡å‹-ps-ä¸æ˜¯javaå†…å­˜ç»“æ„" class="hash-link" aria-label="Direct link to 3.JMMäº†è§£å—ï¼Ÿï¼ˆJavaå†…å­˜æ¨¡å‹ PS ï¼šä¸æ˜¯Javaå†…å­˜ç»“æ„ï¼‰" title="Direct link to 3.JMMäº†è§£å—ï¼Ÿï¼ˆJavaå†…å­˜æ¨¡å‹ PS ï¼šä¸æ˜¯Javaå†…å­˜ç»“æ„ï¼‰">â€‹</a></h2>
<p>JMMè§„å®šäº†å¤šçº¿ç¨‹åœºæ™¯ä¸‹ï¼Œå…±äº«å†…å­˜å¦‚ä½•è¿›è¡Œè¯»å–çš„æƒ…å†µã€‚JMMè§„å®šäº†ï¼Œå†…å­˜åˆ†ä¸¤å—ï¼Œä¸€å—æ˜¯è¿™ç§å†…å­˜å…±äº«çš„åŒºåŸŸï¼Œä¸€å—æ˜¯è¿™ä¸ªçº¿ç¨‹ç§æœ‰çš„å†…å­˜å–æ‚¦ï¼Œå†…å­˜å…±äº«çš„åŒºåŸŸï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½å¯ä»¥è¿›è¡Œè®¿é—®ï¼Œä½†æ˜¯å¦‚æœæ˜¯çº¿ç¨‹ç§æœ‰çš„åŒºåŸŸï¼Œåªæœ‰çº¿ç¨‹æœ¬èº«å¯ä»¥è®¿é—®ï¼Œä¸åŒçº¿ç¨‹ä¹‹é—´æ— æ³•äº’ç›¸è®¿é—®ç§æœ‰çš„æ•°æ®ï¼Œåªèƒ½é€šè¿‡å…±äº«å†…å­˜è¿›è¡Œæ•°æ®çš„ä¼ è¾“å’Œä¿®æ”¹ï¼Œè¿™æ ·çš„è¯è¿™ç§çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ä¹Ÿå…¨éƒ¨ç•™åœ¨äº†å…±äº«å†…å­˜çš„è¿™ä¸€å—åŒºåŸŸã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4casäº†è§£å—">4.CASäº†è§£å—ï¼Ÿ<a href="#4casäº†è§£å—" class="hash-link" aria-label="Direct link to 4.CASäº†è§£å—ï¼Ÿ" title="Direct link to 4.CASäº†è§£å—ï¼Ÿ">â€‹</a></h2>
<p>CASç§°ä¸ºcompare and swap ï¼Œ ä¹Ÿå°±æ˜¯æ¯”è¾ƒå†äº¤æ¢ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ç§ä¹è§‚é”çš„è¿™ç§æ€æƒ³ï¼Œåœ¨ä¸ç”¨é”çš„æƒ…å†µä¸‹å»è§£å†³è¿™ç§æ•°æ®çš„åŸå­æ€§æ“ä½œï¼Œjavaä¸­çš„å¾ˆå¤šåœ°æ–¹ï¼Œæ¯”å¦‚è¯´è¿™ä¸ªAQSæ¡†æ¶è¿˜æœ‰atomicç±»éƒ½æ˜¯ç”¨è¿™ä¸ªæ¥å–å®ç°çš„ï¼Œä»–ä¸æƒ³æ¯”å¦‚è¯´è¿™ç§synchronizedè¿™ç§æ‚²è§‚æ‰€ï¼Œä»–ä¸€å¼€å§‹ä¸ä¼šå¯¹è¿™ç§å¯¹è±¡ä¸Šé”ï¼Œå®Œå…¨ä¸è€ƒè™‘è¿™ç§å†²çªçš„æƒ…å†µï¼Œä½†æ˜¯compareçš„æ—¶å€™ï¼Œå¦‚æœå‘ç°çœŸçš„ä¸ä¸€è‡´ï¼Œå†²çªäº†ï¼Œä»–å°±ä¼šå»è¿›è¡Œè‡ªæ—‹çš„æ“ä½œï¼Œé‡æ–°æ‰§è¡Œä¸€æ¬¡æ“ä½œï¼Œç„¶åä¸€ç›´å»casè‡ªæ—‹ï¼ŒçŸ¥é“æ¯”è¾ƒæˆåŠŸã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5è¯·ä½ è°ˆè°ˆå¯¹volatileå…³é”®å­—çš„ç†è§£">5.è¯·ä½ è°ˆè°ˆå¯¹volatileå…³é”®å­—çš„ç†è§£<a href="#5è¯·ä½ è°ˆè°ˆå¯¹volatileå…³é”®å­—çš„ç†è§£" class="hash-link" aria-label="Direct link to 5.è¯·ä½ è°ˆè°ˆå¯¹volatileå…³é”®å­—çš„ç†è§£" title="Direct link to 5.è¯·ä½ è°ˆè°ˆå¯¹volatileå…³é”®å­—çš„ç†è§£">â€‹</a></h2>
<p>volatileå…³é”®å­—ä¸»è¦æ˜¯é’ˆå¯¹é’ˆå¯¹è¿™ä¸ªJITçš„ã€‚JITä¼šå†javaä»£ç è¿è¡Œçš„æ—¶å€™è¿›è¡Œä¸€äº›ä¼˜åŒ–ï¼Œç¬¬ä¸€ä¸ªä¼˜åŒ–å°±æ˜¯å˜é‡çš„å¯è§æ€§ä¼˜åŒ–ï¼Œå°±æ˜¯å¦‚æœä¸€ä¸ªå˜é‡ç”¨çš„ç‰¹åˆ«å¤šï¼Œæ¯”å¦‚è¯´1ä¸€æ¬¡å¾ªç¯ï¼Œä»–å°±ä¼šæŠŠæš‚æ—¶ç”¨ä¸€ä¸ªå›ºå®šçš„å€¼å»æ›¿ä»£ï¼Œä½†æ˜¯è¿™æ ·çš„è¯ï¼ŒåŸæœ¬çš„å˜é‡å°±ä¸å¯è§äº†ï¼Œvoliteå°±æ˜¯ç¦æ­¢äº†è¿™ä¸ªç¼–è¯‘å™¨çš„ä¼˜åŒ–ï¼Œä½¿è¿™ä¸ªå˜é‡çš„å˜åŒ–å¯¹æ‰€æœ‰çº¿ç¨‹å¯è§ï¼Œä¿è¯è¿™ä¸ªç»“æœçš„ä¸€ä¸ªæ­£ç¡®æ€§ã€‚ç¬¬äºŒä¸ªä¼˜åŒ–å°±æ˜¯æŒ‡ä»¤é‡æ‹ï¼Œå°±æ˜¯æˆ‘ä»¬å†™çš„javaä»£ç ï¼Œæœ‰çš„æ—¶å€™JITæˆ–è€…è¯´è¿™ä¸ªç¼–è¯‘å™¨ä¼šå¸®æˆ‘ä»¬å»ä¼˜åŒ–ä¸€äº›ä»£ç çš„é¡ºåºï¼Œè¿™æ ·æ‰§è¡Œçš„æ—¶å€™ï¼Œæœ‰å¯èƒ½é¡ºåºä¸ä¸€è‡´ï¼Œå¦‚æœæˆ‘ä»¬ä¸æƒ³å‘ç”Ÿè¿™ç§ä¼˜åŒ–ï¼Œæˆ‘ä»¬å°±å¯ä»¥åªç”¨è¿™ä¸ªvolatileå…³é”®å­—ï¼Œä¸€ä¸ªå˜é‡åŠ ä¸Šè¿™ä¸ªå…³é”®å­—ä¹‹åï¼Œé‚£é—¨æ‰€æœ‰çš„è¿™ä¸ªå…³é”®å­—ä¹‹å‰çš„å†™æ“ä½œéƒ½å¿…é¡»å†è¿™ä¸ªvolatileä¹‹å‰å®Œæˆï¼Œä¸èƒ½è¶Šè¿‡ï¼Œè¿™ä¸ªå…³é”®è¯ä¹‹åçš„è¿™ä¸ªè¯»æ“ä½œï¼Œéƒ½åªèƒ½åœ¨è¿™ä¸ªvolatileå…³é”®è¯ä¹‹åè¯»ï¼Œä¸èƒ½è¶Šè¿‡ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6ä»€ä¹ˆæ˜¯aqs">6.ä»€ä¹ˆæ˜¯AQS<a href="#6ä»€ä¹ˆæ˜¯aqs" class="hash-link" aria-label="Direct link to 6.ä»€ä¹ˆæ˜¯AQS" title="Direct link to 6.ä»€ä¹ˆæ˜¯AQS">â€‹</a></h2>
<p>AQSæ˜¯ä¸€ç§é”çš„æœºåˆ¶ï¼Œæ˜¯å¾ˆå¤šåŸºç¡€ç»„ä»¶çš„æ¡†æ¶ï¼Œæ¯”å¦‚ReentrantLockå’ŒSemaphoreï¼Œå…¶å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªåŒå‘çš„é˜Ÿåˆ—ï¼Œå½“æœ‰ä¸€ä¸ªçº¿ç¨‹å»å°è¯•è·å–é”çš„æ—¶å€™ï¼Œä¼šå»ä¿®æ”¹AQSå†…éƒ¨çš„ä¸€ä¸ªstateå€¼ï¼Œæ”¹ä¸º1è¡¨ç¤ºæŒæœ‰é”äº†ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœæœ‰å…¶ä»–çš„çº¿ç¨‹æ¥ï¼Œè·å–å¤±è´¥ï¼Œå°±ä¼šæš‚æ—¶æŠŠè¿™ä¸ªçº¿ç¨‹æ”¾åˆ°è¿™ä¸ªåŒå‘ç­‰å¾…é˜Ÿåˆ—ä¸­å»ç­‰å¾…é”çš„é‡Šæ”¾ï¼Œç„¶åè¿™é‡Œé¢å€¼å¾—è¯´çš„æ˜¯ï¼Œå½“åŒæ—¶æœ‰ä¸¤ä¸ªçº¿ç¨‹å»è·å–é”ï¼Œå¹¶ä¸”ä¿®æ”¹è¿™ä¸ªAQSçš„stateçš„å€¼çš„æ—¶å€™ï¼Œåº•å±‚ä¼šä½¿ç”¨ä¸€ä¸ªCASçš„æ–¹æ³•å»ä¿®æ”¹ï¼Œæ¥ç¡®ä¿æ“ä½œçš„åŸå­æ€§ã€‚å¹¶ä¸”AQSæä¾›äº†å…¬å¹³é”å’Œéå…¬å¹³é”çš„ä¸¤ç§å®ç°æ–¹å¼ï¼Œåœ¨ä¸€ä¸ªçº¿ç¨‹æ¥è·å–é”çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™åŠ å…¥è¿˜æœ‰å…¶ä»–çš„çº¿ç¨‹åœ¨ç­‰å¾…è·å–é”ï¼Œå…¬å¹³é”çš„è¯ï¼Œä¼šå…ˆæŠŠè¿™ä¸ªæ–°æ¥çš„é”æ”¾åˆ°è¿™ä¸ªé˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œç„¶åä»è¿™ä¸ªé˜Ÿåˆ—çš„å¤´éƒ¨å–å‡ºå…ƒç´ æ¥è·å–é”ï¼Œå¦‚æœæ˜¯éå…¬å¹³é”çš„è¯ï¼Œç›´æ¥ä¼šå…ˆè®©è¿™ä¸ªæ–°æ¥çš„çº¿ç¨‹å»ç›´æ¥è·å–é”ï¼Œè€Œä¸ç®¡å…¶ä»–å·²ç»ç­‰å¾…äº†æ¯”è¾ƒä¹…çš„é”ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7ä»€ä¹ˆæ˜¯reentrantlockåº•å±‚åŸç†æ˜¯ä»€ä¹ˆ">7.ä»€ä¹ˆæ˜¯ReentrantLockï¼Œåº•å±‚åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ<a href="#7ä»€ä¹ˆæ˜¯reentrantlockåº•å±‚åŸç†æ˜¯ä»€ä¹ˆ" class="hash-link" aria-label="Direct link to 7.ä»€ä¹ˆæ˜¯ReentrantLockï¼Œåº•å±‚åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" title="Direct link to 7.ä»€ä¹ˆæ˜¯ReentrantLockï¼Œåº•å±‚åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ">â€‹</a></h2>
<p>ReentrantLockå’Œsynchronizedä¸€æ ·ï¼Œéƒ½æ˜¯javaä¸­çš„ä¸€ç§é”çš„æœºåˆ¶ï¼Œç›¸æ¯”äºè¿™ä¸ªsynchronizedï¼Œreentrantlockæ”¯æŒä¸­æ–­ï¼Œä¹Ÿæ”¯æŒå¤šä¸ªæ¡ä»¶wait()ç­‰å¾…ï¼Œæ”¯æŒè¶…æ—¶æ—¶é—´ï¼Œæ”¯æŒå…¬å¹³é”ï¼Œè¿™ä¸ªæ˜¯synchroniedä¸å…·å¤‡çš„ã€‚ä½†æ˜¯æœ€é‡è¦çš„æ˜¯ï¼Œè¿™ä¸ªReentrantlockçš„åº•å±‚å®ç°å’Œsynchronizedå¾ˆä¸ä¸€æ ·ï¼Œè¿™ä¸ªReentrantLockä¸»è¦æ˜¯åŸºäºè¿™ä¸ªCASå’Œè¿™ä¸ªAQSå»å®ç°çš„ï¼Œå°¤å…¶æ˜¯è¿™ä¸ªAQSï¼Œå†è¿™ä¸ªReentrantLockä¸­ç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é˜Ÿåˆ—ï¼Œåˆ†åˆ«æœ‰ä¸€ä¸ªå¤´èŠ‚ç‚¹å’Œå°¾éƒ¨èŠ‚ç‚¹ï¼Œåœ¨è¿™ä¸ªReentrantLockçš„å®ç°ç±»ä¸­æœ‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«æ˜¯å¤´æŒ‡é’ˆå’Œè¿™ä¸ªå°¾æŒ‡é’ˆåˆ†åˆ«æŒ‡å‘äº†è¿™ä¸ªé˜Ÿåˆ—çš„å¤´éƒ¨å’Œè¿™ä¸ªé˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œå¹¶ä¸”è¿™ä¸ªç±»ä¸­è¿˜è®°å½•äº†ä¸€ä¸ªstateå€¼å’Œä¸€ä¸ªå½“å…ˆè·å–é”çš„çº¿ç¨‹çš„æŒ‡é’ˆï¼Œä»–çš„è¿™ä¸ªåŸºæœ¬æµç¨‹æ˜¯å½“ä¸€ä¸ªçº¿ç¨‹è¿‡æ¥äº†ä¹‹åï¼Œä¼šé¦–å…ˆå°è¯•å»ä¿®æ”¹è¿™ä¸ªstateå€¼ï¼Œæ”¹ä¸º1ï¼Œå¦‚æœä¿®æ”¹æˆåŠŸå°±æŠŠå½“å‰ç±»ä¸­çš„çº¿ç¨‹æŒ‡é’ˆæŒ‡å‘å½“å‰çº¿ç¨‹ï¼Œå¦‚æœè·å–å¤±è´¥ï¼Œé”å·²ç»è¢«åˆ«çš„çº¿ç¨‹è·å–ï¼Œå°±ä¼šæŠŠè¿™ä¸ªçº¿ç¨‹æš‚æ—¶æ”¾å…¥åˆ°è¿™ä¸ªåŒå‘é˜Ÿåˆ—ä¸­å»ï¼ŒåŒæ—¶å»åŒæ­¥æ›´æ–°æŒ‡é’ˆï¼Œè¿™ä¸ªæ˜¯é’ˆå¯¹çš„å•ä¸ªçº¿ç¨‹çš„æƒ…å†µï¼Œå¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹å»åŒæ—¶è·å–é”å»ä¿®æ”¹è¿™ä¸ªstateå€¼ï¼Œæœºä¼šå»åˆ©ç”¨è¿™ä¸ªCASä¹è§‚é”çš„æœºåˆ¶å»ä¿®æ”¹ï¼Œä¿è¯åŸå­æ€§çš„æ“ä½œï¼Œå¹¶ä¸”æ²¡æŠ¢åˆ°é”çš„è¿™ä¸ªçº¿ç¨‹ä¼šæš‚æ—¶æ”¾å…¥åˆ°è¿™ä¸ªåŒå‘é˜Ÿåˆ—ä¸­å»ã€‚å¹¶ä¸”AQSæä¾›äº†å…¬å¹³é”å’Œéå…¬å¹³é”çš„ä¸¤ç§å®ç°æ–¹å¼ï¼Œåœ¨ä¸€ä¸ªçº¿ç¨‹æ¥è·å–é”çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™åŠ å…¥è¿˜æœ‰å…¶ä»–çš„çº¿ç¨‹åœ¨ç­‰å¾…è·å–é”ï¼Œå…¬å¹³é”çš„è¯ï¼Œä¼šå…ˆæŠŠè¿™ä¸ªæ–°æ¥çš„é”æ”¾åˆ°è¿™ä¸ªé˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œç„¶åä»è¿™ä¸ªé˜Ÿåˆ—çš„å¤´éƒ¨å–å‡ºå…ƒç´ æ¥è·å–é”ï¼Œå¦‚æœæ˜¯éå…¬å¹³é”çš„è¯ï¼Œç›´æ¥ä¼šå…ˆè®©è¿™ä¸ªæ–°æ¥çš„çº¿ç¨‹å»ç›´æ¥è·å–é”ï¼Œè€Œä¸ç®¡å…¶ä»–å·²ç»ç­‰å¾…äº†æ¯”è¾ƒä¹…çš„é”ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="8synchronizedå’Œlockæœ‰ä»€ä¹ˆåŒºåˆ«">8.synchronizedå’Œlockæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<a href="#8synchronizedå’Œlockæœ‰ä»€ä¹ˆåŒºåˆ«" class="hash-link" aria-label="Direct link to 8.synchronizedå’Œlockæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" title="Direct link to 8.synchronizedå’Œlockæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ">â€‹</a></h2>
<p>æˆ‘è§‰å¾—å¯ä»¥ä»ä¸‰ä¸ªå±‚é¢æ¥è¯´ä¸€ä¸‹è¿™ä¸ªsynchronizedå’Œlockçš„ä¸åŒï¼Œé¦–å…ˆå°±æ˜¯è¯­æ³•å±‚é¢ï¼Œè¿™ä¸ªsynchronizedæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œåº•å±‚æ˜¯åˆ©ç”¨äº†C++æ¥å–å®ç°äº†è¿™ä¸ªé”çš„æœºåˆ¶ï¼Œä½†æ˜¯è¿™ä¸ªlockæ˜¯ä¸€ä¸ªjavaå†™çš„æ¥å£ï¼Œæ˜¯ç”±jdkå»å®ç°çš„ï¼Œå¹¶ä¸”è¿™ä¸ªsynchronizedä¼šå»éšç€è¿™ä¸ªåŒæ­¥ä»£ç å¿«çš„ç»“æŸè‡ªåŠ¨çš„å»é‡Šæ”¾è¿™ä¸ªé”ï¼Œä½†æ˜¯è¿™ä¸ªlockå¿…é¡»è°ƒç”¨unlockæ–¹æ³•å»æ‰‹åŠ¨é‡Šæ”¾é”ã€‚ç¬¬äºŒä¸ªå±‚é¢å¯ä»¥ä»è¿™ä¸ªåŠŸèƒ½å±‚é¢æ¥å–è¯´ä¸€ä¸‹è¿™ä¸ªä¸¤ä¸ªé”çš„åŒºåˆ«ï¼Œé¦–å…ˆè¿™ä¸ªsynchronizedé”å’Œlocké”éƒ½å½“æœ‰å…·å¤‡é”æä¾›çš„äº’æ–¥å’ŒåŒæ­¥çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¯é‡å…¥é”ï¼Œä¹Ÿæ˜¯å®ç°çš„ï¼Œä½†æ˜¯lockçš„å…·å¤‡æ›´å¤šçš„ç‰¹æ€§ï¼Œæ¯”å¦‚è¯´æ”¯æŒå®ç°å…¬å¹³é”ï¼Œæ”¯æŒè¶…æ—¶ç­‰å¾…ï¼Œæ”¯æŒæ‰“ç®—ï¼Œæ”¯æŒå¤šæ¡ä»¶è¢«æ‰“æ–­ï¼Œå¹¶ä¸”è¿™ä¸ªlockä¹Ÿæœ‰å¤šç§çš„å¤šç§åœºæ™¯çš„å®ç°æ–¹å¼ï¼Œæ¯”å¦‚è¯´è¿™ä¸ªreentrantlocké”ï¼Œè¿™ä¸ªreentrantlockReadandWriteé”ï¼Œå¯ä»¥è¯´åŠŸèƒ½æ¯”è¾ƒä¸°å¯Œã€‚ç¬¬ä¸‰ä¸ªå±‚é¢å°±æ˜¯è¿™ä¸¤ä¸ªé”çš„æ€§èƒ½å’Œé€‚ç”¨åœºæ™¯æ–¹é¢ï¼Œè¿™ä¸ªReentrantLocké”é€‚åˆæ¯”è¾ƒè·å–é”å†²çªæ¯”è¾ƒå¤šçš„æƒ…å†µï¼Œæ€§èƒ½æ¯”è¾ƒé«˜ï¼Œå› ä¸ºåº•å±‚ä¼šå»ä½¿ç”¨è¿™ä¸ªjvmæä¾›çš„å®ç°æ–¹å¼ï¼Œä½†æ˜¯è¿™ä¸ªsynchronizedé”è¿™ç§åœºæ™¯å°±ä¼šå»ä½¿ç”¨å†…éƒ¨çš„monitoræœºåˆ¶ï¼Œå»æ‰ç”¨C++çš„åº•å±‚ä»£ç ï¼Œè¿™ç§ä¸Šä¸‹æ–‡å°¤å…¶æ˜¯å†…æ ¸æ€å’Œè¿™ç§ç”¨æˆ·æ€ä¹‹é—´çš„åˆ‡æ¢ï¼Œæ•ˆç‡ç¡®å®æ¯”è¾ƒä½ã€‚ä½†æ˜¯å¦‚æœè¯´è¿™ç§é”çš„ä½¿ç”¨åœºæ™¯ä¸­ï¼Œå†²çªå¹¶ä¸æ˜¯å¾ˆå¤šçš„è¯ï¼Œsynchronizedçš„æ•ˆç‡è¿˜æ˜¯æ›´åé«˜çš„ï¼Œå› ä¸ºåº•å±‚ä¼šå»ä½¿ç”¨è¿™ä¸ªè½»é‡é”å’Œè¿™ç§åå‘é”å»å®ç°äº†ä¸€ä¸ªä¼˜åŒ–ï¼Œä½†æ˜¯è¿™ä¸ªlockä¹Ÿä¸èµ–ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="9æ­»é”äº§ç”Ÿçš„æ¡ä»¶æ˜¯ä»€ä¹ˆå¦‚ä½•è¯Šæ–­">9.æ­»é”äº§ç”Ÿçš„æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•è¯Šæ–­ï¼Ÿ<a href="#9æ­»é”äº§ç”Ÿçš„æ¡ä»¶æ˜¯ä»€ä¹ˆå¦‚ä½•è¯Šæ–­" class="hash-link" aria-label="Direct link to 9.æ­»é”äº§ç”Ÿçš„æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•è¯Šæ–­ï¼Ÿ" title="Direct link to 9.æ­»é”äº§ç”Ÿçš„æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•è¯Šæ–­ï¼Ÿ">â€‹</a></h2>
<p>æ­»é”äº§ç”Ÿçš„æ¡ä»¶æ˜¯å½“å¤šçº¿ç¨‹ä¹‹é—´ï¼Œçº¿ç¨‹è·å–å¤šæŠŠé”ï¼Œè¿™ç§æƒ…å†µä¸‹å®¹æ˜“äº§ç”Ÿæ­»é”ï¼Œæ¯”å¦‚è¯´ï¼Œçº¿ç¨‹1è·å–äº†Aé”ï¼Œç»§ç»­æƒ³è¦è·å–Bé”ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹2è·å–äº†Bé”ï¼Œç»§ç»­æƒ³è¦è·å–Aé”ï¼Œè¿™ä¸ªæ—¶å€™çº¿ç¨‹1å’Œçº¿ç¨‹2æ— æ³•ä¸»åŠ¨é‡Šæ”¾è‡ªå·±æ‹¥æœ‰çš„é”ï¼Œå°±ä¼šé€ æˆä¸€ä¸ªæ­»é”ã€‚å¦‚ä½•è¯Šæ–­ï¼Œä¸€ç§æ˜¯é€šè¿‡å‘½ä»¤è¡Œçš„æ–¹å¼ï¼Œæ¯”å¦‚jspå’Œjstackå‘½ä»¤ï¼Œå‰è€…å¯ä»¥å»å±•ç¤ºå½“å‰è¿›ç¨‹ä¸­æ‰€æœ‰çš„çº¿ç¨‹è¯¦æƒ…ï¼Œåè€…å¯ä»¥è¾“å‡ºæŸä¸€ä¸ªçº¿ç¨‹çš„å †æ ˆæƒ…å†µå’Œæ­»é”æ£€æµ‹çš„æ—¥å¿—ã€‚å¦ä¸€ç§æ˜¯é€šè¿‡ä¸€äº›å¯è§†åŒ–å·¥å…·ï¼Œæ¯”å¦‚jconsoleï¼Œè¿™äº›ä¸€èˆ¬åœ¨jdkçš„binç›®å½•ä¸‹éƒ½ä¼šå­˜åœ¨ï¼Œå¯ä»¥è¿›è¡ŒæŸ¥çœ‹</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="10èŠä¸€ä¸‹è¿™ä¸ªconcurrenthashmap">10.èŠä¸€ä¸‹è¿™ä¸ªConcurrentHashMap<a href="#10èŠä¸€ä¸‹è¿™ä¸ªconcurrenthashmap" class="hash-link" aria-label="Direct link to 10.èŠä¸€ä¸‹è¿™ä¸ªConcurrentHashMap" title="Direct link to 10.èŠä¸€ä¸‹è¿™ä¸ªConcurrentHashMap">â€‹</a></h2>
<p>ConcurrentHashMapæœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ä¸ªhashmapï¼Œåªä¸è¿‡å¯¹è¿™ä¸ªå¹¶å‘å®‰å…¨åšäº†å®ç°ï¼Œæ‰€ä»¥æˆ‘é‡ç‚¹æ¥è°ˆä¸€ä¸‹è¿™ä¸ªå¹¶å‘å®‰å…¨è¿™ä¸€å—ï¼Œä»–æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Œé¦–å…ˆåœ¨jdk1.7çš„ç‰ˆæœ¬å½“ä¸­ï¼Œä»–æ˜¯é‡‡ç”¨äº†ä¸€ä¸ªsegmantå›ºå®šçš„æ•°ç»„çš„ä¸€ä¸ªä¸œè¥¿ï¼Œå¤§å°ä¸º16ï¼Œæ¯ä¸€ä¸ªæ•°ç»„ä¿å­˜äº†ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘äº†å¦ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„æ˜¯å¯ä»¥åŠ¨æ€æ‰©å®¹å¹¶ä¸”å»è¿™ä¸ªæ·»åŠ èŠ‚ç‚¹æˆ–è€…è¯´èŠ‚ç‚¹è½¬åŒ–ä¸ºé“¾è¡¨çš„ï¼Œä»–é‡‡ç”¨äº†è¿™ä¸ªReentrantLocké’ˆå¯¹è¿™ä¸ªSegamentæ•°ç»„ï¼Œçš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™ä¸ªç²’åº¦å»è¿›è¡Œäº†åŠ é”ï¼Œå¦‚æœé‡åˆ°è¿™ä¸ªå¹¶å‘çš„æƒ…å†µï¼Œå¾€è¿™ä¸ªåŒä¸€ä¸ªsegamentèŠ‚ç‚¹æ·»åŠ å…ƒç´ ï¼ŒReentrantLockå°±ä¼šå»ä½¿ç”¨è¿™ä¸ªCASæ¥å»è‡ªæ—‹ï¼Œä¿è¯å¹¶å‘å®‰å…¨ã€‚jdk1.8ä¹‹åå®Œå…¨æŠ›å¼ƒäº†è¿™ç§è®¾è®¡ï¼Œå› ä¸ºå›ºå®šå°çš„æ•°ç»„ï¼Œè€Œä¸”æ˜¯é’ˆå¯¹çš„è¿™ä¸ªæ•´ä¸ªsegamnetèŠ‚ç‚¹åŠ é”ï¼Œç²’åº¦å¤ªå¤§äº†ï¼Œæ•ˆç‡å¤ªä½äº†ï¼Œæ‰€ä»¥ConcurrentHashMapé‡‡ç”¨äº†å’ŒHashMapä¸€æ ·çš„æ•°æ®ç»“æ„ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„è¿™ç§æ•°ç»„åŠ ä¸Šé“¾è¡¨å’Œè¿™ä¸ªçº¢é»‘æ ‘ï¼Œä½†æ˜¯ä»–çš„åŠ é”ç­–ç•¥å°±æ˜¯åˆ©ç”¨äº†è¿™ä¸ªCASå’Œè¿™ä¸ªsynchronizedç»“åˆï¼Œå¯¹äºç©ºèŠ‚ç‚¹ï¼Œç›´æ¥åˆ©ç”¨casè¿™ç§æ‚²è§‚é”çš„æœºåˆ¶ï¼Œä½†æ˜¯é’ˆå¯¹è¿™ä¸ªå·²ç»é“¾è¡¨åŒ–æˆ–è€…è¿™ä¸ªçº¢é»‘æ ‘åŒ–çš„è¿™ä¸ªèŠ‚ç‚¹å»ï¼Œç›´æ¥åˆ©ç”¨synchronizedé”å»é”ä½ã€‚è¿™æ ·é”çš„ç²’åº¦æ›´ç»†è‡´ï¼Œæ€§èƒ½ä¹Ÿç›¸å¯¹æ›´é«˜</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="11å¯¼è‡´å¹¶å‘ç¨‹åºå‡ºç°é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆjavaç¨‹åºä¸­æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹çš„æ‰§è¡Œå®‰å…¨">11.å¯¼è‡´å¹¶å‘ç¨‹åºå‡ºç°é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆJavaç¨‹åºä¸­æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹çš„æ‰§è¡Œå®‰å…¨ï¼‰<a href="#11å¯¼è‡´å¹¶å‘ç¨‹åºå‡ºç°é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆjavaç¨‹åºä¸­æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹çš„æ‰§è¡Œå®‰å…¨" class="hash-link" aria-label="Direct link to 11.å¯¼è‡´å¹¶å‘ç¨‹åºå‡ºç°é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆJavaç¨‹åºä¸­æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹çš„æ‰§è¡Œå®‰å…¨ï¼‰" title="Direct link to 11.å¯¼è‡´å¹¶å‘ç¨‹åºå‡ºç°é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆJavaç¨‹åºä¸­æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹çš„æ‰§è¡Œå®‰å…¨ï¼‰">â€‹</a></h2>
<p>è¿™ä¸ªå°±è¦ä»å¹¶å‘ç¼–ç¨‹çš„ä¸‰å¤§ç‰¹æ€§è°ˆäº†ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯åŸå­æ€§ï¼Œå°±æ˜¯cpuå†å»æ‰§è¡Œç¨‹åºçš„æ—¶å€™ï¼Œåªèƒ½æœ‰æ‰§è¡Œå’Œä¸æ‰§è¡Œä¸¤ä¸ªé˜¶æ®µï¼Œå¹¶ä¸”æ— æ³•ä¸­æ–­ã€‚æ‰€ä»¥å¾ˆå¤šæ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰åˆ¤æ–­å¥½å°±å»æ‰§è¡Œäº†ç¨‹åºï¼Œå°±ä¼šé€ æˆé—®é¢˜ï¼Œå…¸å‹çš„é—®é¢˜ï¼Œå°±æ˜¯æœ‰10å¼ ç¥¨ï¼Œä½†æ˜¯æœ‰20ä¸ªçº¿ç¨‹å»æŠ¢ï¼Œç»“æœå–äº†11å¼ ç¥¨ï¼Œå°±æ˜¯å› ä¸ºå…¶ä¸­æœ‰ä¸€ä¸ªåˆ¤æ–­æœ‰é—®é¢˜ï¼Œæ‰€ä»¥è§£å†³è¿™ç±»é—®é¢˜é€šå¸¸éƒ½ä¼šå»ç”¨é”æ¥å–å®ç°ï¼Œè®©éœ€è¦å»æ‰§è¡Œçš„å»æ‰§è¡Œï¼Œå¦åˆ™å°±ä¸å»æ‰§è¡Œã€‚ç¬¬äºŒä¸ªå°±æ˜¯å¯è§æ€§ï¼Œä¸»è¦å„ä¸ªçº¿ç¨‹ä¹‹é—´å˜é‡çš„å¯è§æ€§ï¼Œé€šå¸¸æ¥è¯´ï¼Œä¸€ä¸ªçº¿ç¨‹æ”¹å˜äº†å˜é‡ï¼Œæ˜¯éœ€è¦åŒæ­¥ä¿®æ”¹å…±äº«å†…å­˜çš„å˜é‡ï¼Œç„¶åå¦ä¸€ä¸ªçº¿ç¨‹ä»è¿™ä¸ªå…±äº«å†…å­˜å˜é‡å»è¯»å–ï¼Œå› ä¸ºçº¿ç¨‹ä¹‹é—´çš„å˜é‡å†…å­˜æ˜¯éš”ç¦»çš„å—ï¼Œä½†æ˜¯è¿™æ ·æŒºè€—è´¹æ€§èƒ½çš„ï¼Œäºæ˜¯JAVAä¸­çš„JITæˆ–è€…å†…å­˜ç¼–è¯‘å™¨ï¼Œå°±ä¼šå»é€‚å½“çš„ä¼˜åŒ–ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™ä¼˜åŒ–å¯èƒ½ä¼šå‡ºé—®é¢˜ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™ä¸€èˆ¬ä¹Ÿå¯ä»¥åŠ é”ï¼Œä½†æ›´æ¨èæœ‰è¿™ä¸ªvoliateå…³é”®å­—æ¥å®ç°è¿™ç§çº¿ç¨‹ä¹‹é—´çš„å˜é‡å¯è§æ€§ã€‚ç¬¬ä¸‰ä¸ªå°±æ˜¯è¿™ä¸ªæœ‰åºæ€§ï¼Œè¿™ä¸ªä¾æ—§æ˜¯ç¼–è¯‘å™¨ä¼˜åŒ–çš„é—®é¢˜ï¼Œæœ‰æ—¶å€™ä¼šæŠŠä½ çš„ä»£ç é¡ºåºè¿›è¡Œä¼˜åŒ–ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šå‡ºé—®é¢˜ï¼Œè¿™ä¸ªæ—¶å€™ä¾æ—§æ¨èä½¿ç”¨è¿™ä¸ªvoliateå…³é”®è¯å»å£°æ˜ç¦æ­¢è¿›è¡Œè¿™ç±»ä¼˜åŒ–ï¼Œä¿è¯ä»£ç çš„æœ‰åºæ€§ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="çº¿ç¨‹æ± ">çº¿ç¨‹æ± <a href="#çº¿ç¨‹æ± " class="hash-link" aria-label="Direct link to çº¿ç¨‹æ± " title="Direct link to çº¿ç¨‹æ± ">â€‹</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1è¯´ä¸€ä¸‹çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°çº¿ç¨‹æ± çš„æ‰§è¡ŒåŸç†çŸ¥é“å—">1.è¯´ä¸€ä¸‹çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°ï¼ˆçº¿ç¨‹æ± çš„æ‰§è¡ŒåŸç†çŸ¥é“å—ï¼Ÿï¼‰<a href="#1è¯´ä¸€ä¸‹çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°çº¿ç¨‹æ± çš„æ‰§è¡ŒåŸç†çŸ¥é“å—" class="hash-link" aria-label="Direct link to 1.è¯´ä¸€ä¸‹çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°ï¼ˆçº¿ç¨‹æ± çš„æ‰§è¡ŒåŸç†çŸ¥é“å—ï¼Ÿï¼‰" title="Direct link to 1.è¯´ä¸€ä¸‹çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°ï¼ˆçº¿ç¨‹æ± çš„æ‰§è¡ŒåŸç†çŸ¥é“å—ï¼Ÿï¼‰">â€‹</a></h2>
<p>çº¿ç¨‹æ± ä¸€å…±æœ‰ä¸ƒä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯çº¿ç¨‹çš„æ•°é‡è¿™ä¸ªä¸»è¦æ˜¯æŒ‡æ ¸å¿ƒçº¿ç¨‹ï¼Œç¬¬äºŒä¸ªæ˜¯çº¿ç¨‹çš„æœ€å¤§æ•°é‡ï¼Œå…¶å®å°±æ˜¯æ ¸å¿ƒçº¿ç¨‹çš„æ•°é‡åŠ ä¸Šæ•‘æ´çº¿ç¨‹çš„æ•°é‡ï¼Œç¬¬ä¸‰ä¸ªå°±æ˜¯çº¿ç¨‹çš„å­˜æ´»æ—¶é—´ï¼Œç¬¬å››ä¸ªå°±æ˜¯çº¿ç¨‹çš„å­˜æ´»ä¹‹é—´çš„å•ä½ï¼Œè¿™ä¸¤ä¸ªå‚æ•°ä¸»è¦æ˜¯é’ˆå¯¹æ•‘æ´çº¿ç¨‹çš„ï¼Œç¬¬äº”ä¸ªå°±æ˜¯çº¿ç¨‹æ± çš„é˜»å¡é˜Ÿåˆ—ï¼Œç”¨æ¥æ”¾é˜»å¡çš„çº¿ç¨‹è¿›è¡Œç­‰å¾…ï¼Œç¬¬å…­ä¸ªå°±æ˜¯çº¿ç¨‹å·¥å‚ï¼Œè¿™ä¸ªä¸»è¦æ˜¯ç”¨æ¥ç”Ÿæˆä¸€äº›å®šåˆ¶åŒ–çº¿ç¨‹åå­—æ˜¯å¦æ˜¯å®ˆæŠ¤çº¿ç¨‹ä¹‹ç±»çš„ï¼Œç¬¬ä¸ƒä¸ªå°±æ˜¯è¿™ä¸ªæ‹’ç»ç­–ç•¥ã€‚ç„¶åæˆ‘æƒ³è¿›ä¸€æ­¥è§£é‡Šä¸€ä¸‹è¿™ä¸ªçº¿ç¨‹æ± å‚æ•°çš„å«ä¹‰åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Œæ‰€ä»¥å°±è¦äº†è§£è¿™ä¸ªçº¿ç¨‹æ± çš„ä¸€ä¸ªå¤§æ¦‚çš„æµç¨‹ï¼Œé¦–å…ˆï¼Œä»çº¿ç¨‹æ± è·å–çº¿ç¨‹çš„æ—¶å€™ï¼Œä¼šé¦–å…ˆåˆ¤æ–­è¿™ä¸ªæ ¸å¿ƒçº¿ç¨‹æ˜¯å¦å……è¶³ï¼Œå¦‚æœå……è¶³å¯ä»¥ç›´æ¥è·å–çº¿ç¨‹ï¼Œå¦åˆ™å°±å»è¿›å…¥é˜»å¡é˜Ÿåˆ—ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œè¿˜å›å»åˆ¤æ–­ä¸€ä¸‹é˜»å¡é˜Ÿåˆ—æ˜¯å¦æ»¡äº†ï¼Œæ²¡æœ‰æ»¡å°±æ”¾åˆ°é˜»å¡é˜Ÿåˆ—ä¸­ï¼Œæ»¡äº†çš„è¯å°±å»æ‰¾æ•‘æ´çº¿ç¨‹ï¼Œè¿™ä¸ªæ—¶å€™åˆä¼šå»åˆ¤æ–­è¿™ä¸ªæ•‘æ´çº¿ç¨‹çš„ç©ºé—²æ•°é‡å¤Ÿä¸å¤Ÿï¼Œå¤Ÿçš„è¯ï¼Œç›´æ¥è·å–æ•‘æ´çº¿ç¨‹ï¼Œå¦åˆ™çš„è¯ç›´æ¥è¿›è¡Œæ‹’ç»ï¼Œé‡‡ç”¨æå‰è®¾å®šå¥½çš„æ‹’ç»ç­–ç•¥ï¼Œæœ€åä¸€ç‚¹å°±æ˜¯æ ¸å¿ƒçº¿ç¨‹å’Œæ•‘æ´çº¿ç¨‹å¦‚æœæœ‰ç©ºé—²çš„æ—¶å€™ï¼Œä¼šå»å®šæ—¶è½®è¯¢è¿™ä¸ªé˜»å¡é˜Ÿåˆ—ï¼Œçœ‹æœ‰æ²¡æœ‰å¯ä»¥ç›´æ¥å¸®å¿™è§£å†³çš„ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2çº¿ç¨‹æ± ä¸­æœ‰å“ªäº›é˜»å¡é˜Ÿåˆ—">2.çº¿ç¨‹æ± ä¸­æœ‰å“ªäº›é˜»å¡é˜Ÿåˆ—ï¼Ÿ<a href="#2çº¿ç¨‹æ± ä¸­æœ‰å“ªäº›é˜»å¡é˜Ÿåˆ—" class="hash-link" aria-label="Direct link to 2.çº¿ç¨‹æ± ä¸­æœ‰å“ªäº›é˜»å¡é˜Ÿåˆ—ï¼Ÿ" title="Direct link to 2.çº¿ç¨‹æ± ä¸­æœ‰å“ªäº›é˜»å¡é˜Ÿåˆ—ï¼Ÿ">â€‹</a></h2>
<p>æœ‰å››ç§é˜Ÿåˆ—ï¼Œç¬¬ä¸€ç§ArrayBlockingQueueï¼Œè¿™ç§åº•å±‚ä¸»è¦æ˜¯åŸºäºæ•°ç»„çš„ï¼Œéœ€è¦ç»™å®šä¸€ä¸ªå‚æ•°æ¥åˆå§‹åŒ–å¤§å°ï¼Œå¹¶ä¸”ä¼šç«‹å³åˆå§‹åŒ–ï¼Œå¹¶ä¸”åœ¨è¿™ç§é˜»å¡é˜Ÿåˆ—ä¸€èˆ¬ä¼šå¯¹æ•´ä¸ªæ•°ç»„çš„å¢åŠ å’Œåˆ é™¤çš„æ“ä½œåŠ é”ï¼Œå¦ä¸€ä¸ªæ˜¯LinkedBlockingQueueï¼Œè¿™ç§åº•å±‚ä¸»è¦æ˜¯åŸºäºé“¾è¡¨çš„ï¼Œå› æ­¤å¯ä»¥ä¸ç”¨ä¼ é€’å‚æ•°ï¼Œå¦‚æœè¦ä¼ é€’ï¼Œå°±æ˜¯æœ€å¤§å€¼ï¼Œç„¶åå’Œå‰ä¸€ä¸ªä¸ä¸€æ ·ï¼Œè¿™ä¸ªæ˜¯æ‡’åŠ è½½æœºåˆ¶çš„ï¼Œåªæœ‰åŠ ä¸Šå…ƒç´ æ‰ä¼šå»åˆå§‹åŒ–å†…å­˜ç©ºé—´ï¼Œè¿™ä¸ªé“¾è¡¨æœ‰é˜Ÿåˆ—å¤´éƒ¨å’Œå°¾éƒ¨ï¼Œä¸€ä¸ªæ˜¯å‡ºé˜Ÿä¸€ä¸ªæ˜¯å…¥é˜Ÿï¼Œä¼šåœ¨è¿™ä¸¤ä¸ªåœ°æ–¹éƒ½ä¸Šé”ï¼Œæ‰€ä»¥å…è®¸è¿™ä¸ªå¢åŠ å…ƒç´ å’ŒåŠ å…¥å…ƒç´ åŒæ—¶å»æ‰§è¡Œï¼Œæ•ˆç‡è¾ƒé«˜ï¼Œå¹³æ—¶ç”¨çš„æ¯”è¾ƒå¤šçš„ä¹Ÿæ˜¯è¿™ä¸ªã€‚å¦å¤–ä¸¤ä¸ªå°±æ˜¯è¿™ä¸ªä¼˜å…ˆé˜»å¡é˜Ÿåˆ—å’Œæ— å…ƒç´ é˜»å¡é˜Ÿåˆ—ï¼Œå‰è€…å¯ä»¥æ ¹æ®è®¾å®šçš„æ—¶é—´æ’åºï¼Œåè€…ç›¸å½“äºä¸€æ‰‹äº¤é’±ä¸€æ‰‹äº¤è´§ã€‚åä¸¤ä¸ªå°±ç”¨çš„æ¯”è¾ƒå°‘äº†ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3å¦‚ä½•ç¡®å®šæ ¸å¿ƒçº¿ç¨‹æ•°">3.å¦‚ä½•ç¡®å®šæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Ÿ<a href="#3å¦‚ä½•ç¡®å®šæ ¸å¿ƒçº¿ç¨‹æ•°" class="hash-link" aria-label="Direct link to 3.å¦‚ä½•ç¡®å®šæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Ÿ" title="Direct link to 3.å¦‚ä½•ç¡®å®šæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Ÿ">â€‹</a></h2>
<p>æœ‰ä¸‰ç§æƒ…å†µå§ï¼Œç¬¬ä¸€ç§æ˜¯è¿™ä¸ªé«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œä½†æ˜¯è¿™ä¸ªæ¯ä¸ªç°æˆçš„é¢æ‰§è¡Œæ—¶é—´æ¯”è¾ƒçŸ­ï¼Œ è¿™ä¸ªæ—¶å€™ï¼Œä¸€èˆ¬æ ¸å¿ƒçº¿ç¨‹è®¾ç½®ä¸ºè¿™ä¸ªå¤„ç†å™¨çš„é¢æ•°é‡N + 1ï¼Œæ¥å‡å°‘è¿™ä¸ªä¸Šä¸‹æ–‡çš„åˆ‡æ¢ã€‚ç¬¬äºŒç§æ˜¯è¿™ä¸ªå¹¶å‘ä¸é«˜ï¼Œä½†æ˜¯ä»»åŠ¡å®è¡Œæ—¶é—´é•¿çš„æƒ…å†µï¼Œè¿™ä¸ªæ—¶å€™çœ‹ä¸€ä¸‹ï¼Œå¦‚æœæ˜¯è¿™ä¸ªIOå¯†é›†å‹çš„å°±å»è®¾ç½®2N + 1çš„æ•°é‡ï¼Œå¦‚æœæ˜¯è®¡ç®—å¯†é›†å‹çš„ï¼ŒCPUæ¶ˆè€—æ¯”è¾ƒå¤šï¼Œå°±å»è®¾ç½®N + 1ã€‚ç¬¬ä¸‰ç§æƒ…å†µå¹¶å‘é‡éå¸¸é«˜ï¼Œå¹¶ä¸”ï¼Œæ¯ä¸ªå¹¶å‘çš„å¤„ç†æ—¶é—´ä¹Ÿéœ€è¦éå¸¸é•¿ï¼Œé‚£ä¹ˆè¿™ç§æƒ…å†µå°±éœ€è¦è€ƒè™‘ä¸€ä¸‹å…¶ä»–æ–¹é¢çš„äº‹æƒ…äº†ï¼Œæ¯”å¦‚ç¼“å­˜ï¼Œæ¯”å¦‚å¢åŠ æœºå™¨æ•°é‡ï¼Œæœ€åå†æ¥è€ƒè™‘è¿™ä¸ªçº¿ç¨‹æ± çš„é…ç½®ã€‚è¿™ä¸ªæ—¶å€™å‚è€ƒç¬¬äºŒç§æˆ–è€…ç¬¬ä¸€ç§æƒ…å†µã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4çº¿ç¨‹æ± çš„ç§ç±»æœ‰å“ªäº›">4.çº¿ç¨‹æ± çš„ç§ç±»æœ‰å“ªäº›ï¼Ÿ<a href="#4çº¿ç¨‹æ± çš„ç§ç±»æœ‰å“ªäº›" class="hash-link" aria-label="Direct link to 4.çº¿ç¨‹æ± çš„ç§ç±»æœ‰å“ªäº›ï¼Ÿ" title="Direct link to 4.çº¿ç¨‹æ± çš„ç§ç±»æœ‰å“ªäº›ï¼Ÿ">â€‹</a></h2>
<p>ç¬¬ä¸€ä¸ªå°±æ˜¯å›ºå®šé•¿åº¦çš„çº¿ç¨‹æ± ï¼Œè¿™ä¸ªçº¿ç¨‹æ± çš„æœ€å¤§çº¿ç¨‹å’Œæ ¸å¿ƒçº¿ç¨‹ç›¸åŒï¼Œä¸å­˜åœ¨æ•‘æ´çº¿ç¨‹ï¼Œåº•å±‚ä¹Ÿæ˜¯ç”¨è¿™ä¸ªLinkedBlockedQueue,ç„¶åæˆ‘æ¥ä¸‹æ¥å°†çš„å…¶å®ä¹Ÿéƒ½æ˜¯ç”¨è¿™ä¸ªLinkedBlockedQueueã€‚è¿™ä¸ªçº¿ç¨‹æ± æ¯”è¾ƒé€‚åˆå“ªäº›æˆ‘ä»¬å·²ç»çŸ¥é“äº†å¤§æ¦‚çš„ä»»åŠ¡çš„æ•°é‡ï¼Œå¹¶ä¸”æ¯ä¸ªä»»åŠ¡çš„æ‰§è¡Œè€—æ—¶ã€‚ç¬¬äºŒä¸ªå°±æ˜¯å•åˆ©çº¿ç¨‹æ± ï¼Œè¿™ä¸ªå…¶å®ç›¸å½“äºå°±æ˜¯å›ºå®šé•¿åº¦ä¸º1çš„çº¿ç¨‹æ± ï¼Œä½†æ˜¯ä»–ä¼šå»æŒ‰ç…§é¡ºåºå»ä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œï¼Œæ¯”è¾ƒé€‚åˆæŒ‰ç…§é¡ºåºå»æ‰§è¡Œçš„çº¿ç¨‹ä»»åŠ¡ã€‚ç¬¬ä¸‰ç§å°±æ˜¯å¯ç¼“å­˜çš„çº¿ç¨‹æ± ï¼Œè¿™ä¸ªçº¿ç¨‹æ± ä¸­ï¼Œä¸å­˜åœ¨æ ¸å¿ƒçº¿ç¨‹ï¼Œåªä¼šæœ‰æ•‘æ´çº¿ç¨‹ï¼Œå¹¶ä¸”æ•‘æ´ç°æˆçš„å­˜æ´»æ—¶é—´éƒ½æ¯”è¾ƒçŸ­ï¼Œæ¯”å¦‚60ç§’ï¼Œè¿™ä¸ªçº¿ç¨‹æ± æ¯”è¾ƒé€‚åˆå“ªäº›ä»»åŠ¡é‡ç‰¹åˆ«å¤§ï¼Œä½†æ˜¯æ¯ä¸ªä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´åˆç‰¹åˆ«çŸ­çš„åœºæ™¯ã€‚ç¬¬å››ç§å°±æ˜¯å¯ä»¥æ‰§è¡Œä»»åŠ¡å»¶è¿Ÿçš„çº¿ç¨‹æ± ï¼Œè¿™ç§å¯ä»¥äººä¸ºå»æ‰‹åŠ¨è®¾å®šçš„çº¿ç¨‹ä»»åŠ¡çš„æ‰§è¡Œå»¶è¿Ÿæ—¶é—´ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5ä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨è¿™ä¸ªexecutorså»åˆ›å»ºçº¿ç¨‹æ± ">5.ä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨è¿™ä¸ªExecutorså»åˆ›å»ºçº¿ç¨‹æ± <a href="#5ä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨è¿™ä¸ªexecutorså»åˆ›å»ºçº¿ç¨‹æ± " class="hash-link" aria-label="Direct link to 5.ä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨è¿™ä¸ªExecutorså»åˆ›å»ºçº¿ç¨‹æ± " title="Direct link to 5.ä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨è¿™ä¸ªExecutorså»åˆ›å»ºçº¿ç¨‹æ± ">â€‹</a></h2>
<p>å› ä¸ºExecutorså»åˆ›å»ºçº¿ç¨‹æ± çš„æ—¶å€™ï¼Œå¾ˆå¤šå‚æ•°éƒ½ä¸ç”¨è‡ªå·±å¡«ï¼Œéƒ½æ˜¯é»˜è®¤çš„ï¼Œæ¯”å¦‚è¯´è¿™ä¸ªå›ºå®šé•¿çš„çº¿ç¨‹æ± ã€å•åˆ©çº¿ç¨‹æ± ï¼Œé‡Œé¢ç”¨çš„LinkedBlockedQueueï¼Œé»˜è®¤éƒ½æ˜¯Integerçš„æœ€å¤§å€¼ï¼Œå¾ˆæœ‰å¯èƒ½å­˜åœ¨å¤§é‡çš„ä»»åŠ¡ï¼Œå¯¼è‡´äº†OOMï¼Œç¼“å­˜çº¿ç¨‹æ± ä¹Ÿæ˜¯çš„ï¼Œå¯èƒ½ä¸€ç¬é—´å¼€äº†å¤§é‡çš„çº¿ç¨‹ä¹Ÿå¯¼è‡´OOMï¼Œä½†æ˜¯è¿™ä¸ªThreadPoolExecutorså°±ä¼šåˆ›å»ºçš„æ—¶å€™ï¼Œè¦ä½ å¡«å†™7ä¸ªå‚æ•°çš„æ¯ä¸€ä¸ªå‚æ•°ï¼Œæœ‰åŠ©äºè®©ä½ æ³¨æ„åˆ°ï¼Œè®©ä½ åˆ«å¡«å†™é”™å‚æ•°ã€‚è¿™ä¸ªé˜¿é‡Œçš„å¼€å‘æ‰‹å†Œä¸Šé¢ä¹Ÿæ˜¯è¿™ä¹ˆè§„å®šçš„ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ç”¨åœºæ™¯">ä½¿ç”¨åœºæ™¯<a href="#ä½¿ç”¨åœºæ™¯" class="hash-link" aria-label="Direct link to ä½¿ç”¨åœºæ™¯" title="Direct link to ä½¿ç”¨åœºæ™¯">â€‹</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1åœºæ™¯1esæ‰¹é‡æ•°æ®å¯¼å…¥">1.åœºæ™¯1ï¼šESæ‰¹é‡æ•°æ®å¯¼å…¥<a href="#1åœºæ™¯1esæ‰¹é‡æ•°æ®å¯¼å…¥" class="hash-link" aria-label="Direct link to 1.åœºæ™¯1ï¼šESæ‰¹é‡æ•°æ®å¯¼å…¥" title="Direct link to 1.åœºæ™¯1ï¼šESæ‰¹é‡æ•°æ®å¯¼å…¥">â€‹</a></h2>
<p>å½“æ—¶çš„éœ€æ±‚èƒŒæ™¯æ˜¯ï¼Œé¡¹ç›®éœ€è¦ä¸Šçº¿äº†ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦æå‰æŠŠè¿™ä¸ªæ•°æ®åº“çš„æ•°æ®å¤‡ä»½åˆ°esï¼Œæ‰€ä»¥å½“æ—¶ç”¨äº†è¿™ä¸ªçº¿ç¨‹æ± çš„æŠ€æœ¯ï¼Œæ•°æ®åº“å¤§æ¦‚æœ‰50ä¸‡æ¡æ•°æ®ï¼Œæˆ‘ä»¬æŒ‰ç…§æ¯é¡µ2000æ¡æ•°æ®é‡çš„å¤§å°å»è®¡ç®—å‡ºé¡µæ•°ï¼Œåˆ©ç”¨CountDownLaunchå»è¿›è¡Œè¿™ä¸ªè®¡æ•°ï¼Œç„¶åæ¯é¡µçš„ä¸¤åƒæ¡æ•°æ®ï¼Œå¼€ä¸€ä¸ªä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± å»æ‰§è¡Œï¼Œæ¯æ¬¡æ‰§è¡Œå®Œäº†å°±å¯¹è¿™ä¸ªCountDownLaunchè¿›è¡Œå‡å‡çš„æ“ä½œï¼Œåœ¨æ‰€æœ‰ä»»åŠ¡ç»“æŸå‰ï¼Œä¼šæœ‰ä¸€ä¸ªawait()çš„æ–¹æ³•ï¼Œç­‰å¾…æ‰€æœ‰çš„çº¿ç¨‹ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•äº†ï¼Œè¾“å‡ºè¿™ä¸ªä»»åŠ¡çš„æ—¶é—´ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2åœºæ™¯2æ•°æ®æ±‡æ€»">2.åœºæ™¯2ï¼šæ•°æ®æ±‡æ€»<a href="#2åœºæ™¯2æ•°æ®æ±‡æ€»" class="hash-link" aria-label="Direct link to 2.åœºæ™¯2ï¼šæ•°æ®æ±‡æ€»" title="Direct link to 2.åœºæ™¯2ï¼šæ•°æ®æ±‡æ€»">â€‹</a></h2>
<p>æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„ä¸šåŠ¡éœ€è¦å»è¿œç¨‹è°ƒç”¨å¤šä¸ªæ¥å£ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœè¿™ä¸ªæ¥å£ä¸ç”¨è¿™ä¸ªçº¿ç¨‹æ± ï¼Œå°±éœ€è¦å»ä¸²è¡Œæ‰§è¡Œï¼Œè¿™æ ·å°±ä¼šæ¶ˆè€—æ¯”è¾ƒå¤§çš„æ—¶é—´ï¼Œå› æ­¤å¦‚æœè¿™ä¸ªæ¥å£ç›´æ¥ä»–æ²¡æœ‰è¿™ç§å‰åä¾èµ–çš„å…³ç³»ï¼Œå¯ä»¥æŠŠå¤šä¸ªè°ƒç”¨éƒ½æäº¤åˆ°çº¿ç¨‹æ± ä¸­è¿›è¡Œå¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œç„¶ååˆ©ç”¨è¿”å›çš„Futureå¯¹è±¡è·å–è¿”å›å€¼è¿›è¡Œæ•´ä¸ªï¼Œè¿™æ ·çš„è¯ä»»åŠ¡çš„æ‰§è¡Œé€Ÿåº¦å’Œæ•ˆç‡å°±ä¼šéå¸¸å¥½ã€‚å…¸å‹çš„ä¾‹å­å°±æ˜¯æŠ¥è¡¨è¿™ç§ä¸šåŠ¡å—ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3åœºæ™¯3å¼‚æ­¥è°ƒç”¨">3.åœºæ™¯3ï¼šå¼‚æ­¥è°ƒç”¨<a href="#3åœºæ™¯3å¼‚æ­¥è°ƒç”¨" class="hash-link" aria-label="Direct link to 3.åœºæ™¯3ï¼šå¼‚æ­¥è°ƒç”¨" title="Direct link to 3.åœºæ™¯3ï¼šå¼‚æ­¥è°ƒç”¨">â€‹</a></h2>
<p>è¿™ç§ä¸€èˆ¬æ˜¯é¿å…ä¸‹ä¸€ä¸ªæ–¹æ³•å½±å“åˆ°ä¸Šä¸€ä¸ªæ–¹æ³•çš„æ‰§è¡Œï¼Œå½±å“æ•ˆç‡ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ä¸€ä¸ªçº¿ç¨‹æ± å»å¼‚æ­¥è°ƒç”¨æ‰§è¡Œè¿™äº›æ–¹æ³•ï¼Œæ¯”å¦‚ä¹¦æœ‰ä¸€ä¸ªæœç´¢åŠŸèƒ½ï¼Œä¸‹é¢ä¼šæœ‰å¾ˆå¤šè”æƒ³è¯ï¼Œå¹¶ä¸”æœç´¢çš„è®°å½•ä¹Ÿä¼šä¿å­˜åˆ°å†å²è®°å½•ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œä¸ºäº†æ€§èƒ½è€ƒè™‘ï¼Œå¯ä»¥è®©è¿™ä¸ªæœç´¢çš„è®°å½•ä¿å­˜åˆ°å†å²è®°å½•çš„è¿™ä¸ªä»»åŠ¡ï¼Œå•ç‹¬å»æäº¤åˆ°çº¿ç¨‹æ± å»è¿›è¡Œæ‰§è¡Œï¼Œæ¥è°ƒé«˜æ•ˆç‡</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4å¦‚ä½•æ§åˆ¶æŸä¸ªæ–¹æ³•å…è®¸å¹¶å‘è®¿é—®çº¿ç¨‹çš„æ•°é‡">4.å¦‚ä½•æ§åˆ¶æŸä¸ªæ–¹æ³•å…è®¸å¹¶å‘è®¿é—®çº¿ç¨‹çš„æ•°é‡<a href="#4å¦‚ä½•æ§åˆ¶æŸä¸ªæ–¹æ³•å…è®¸å¹¶å‘è®¿é—®çº¿ç¨‹çš„æ•°é‡" class="hash-link" aria-label="Direct link to 4.å¦‚ä½•æ§åˆ¶æŸä¸ªæ–¹æ³•å…è®¸å¹¶å‘è®¿é—®çº¿ç¨‹çš„æ•°é‡" title="Direct link to 4.å¦‚ä½•æ§åˆ¶æŸä¸ªæ–¹æ³•å…è®¸å¹¶å‘è®¿é—®çº¿ç¨‹çš„æ•°é‡">â€‹</a></h2>
<p>å¯ä»¥åˆ©ç”¨è¿™ä¸ªä¿¡å·é‡æ¥è§£å†³ï¼Œæ¯”å¦‚è¯´è¿™ä¸ªjucä¸‹çš„Semaphoreï¼Œæ¯æ¬¡è·å–è¿™ä¸ªä¿¡å·é‡çš„æ—¶å€™ï¼Œä¿¡å·é‡çš„è®¡æ•°å™¨å°±å‡å»1ï¼Œæ‰§è¡Œreleaseæ“ä½œè¿›è¡Œé‡Šæ”¾çš„æ—¶å€™ï¼Œå°±ä¼šè®¡æ•°å™¨+1ï¼Œä»¥æ­¤æ¥å®ç°è¿™ä¸ªé™æµçš„æ“ä½œã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5è¯·ä½ è°ˆè°ˆå¯¹threadlocalçš„ç†è§£">5.è¯·ä½ è°ˆè°ˆå¯¹ThreadLocalçš„ç†è§£<a href="#5è¯·ä½ è°ˆè°ˆå¯¹threadlocalçš„ç†è§£" class="hash-link" aria-label="Direct link to 5.è¯·ä½ è°ˆè°ˆå¯¹ThreadLocalçš„ç†è§£" title="Direct link to 5.è¯·ä½ è°ˆè°ˆå¯¹ThreadLocalçš„ç†è§£">â€‹</a></h2>
<p>TheradLocalæ˜¯ä¸€ç§è§£å†³çº¿ç¨‹å¹¶å‘é—®é¢˜çš„ä¸€ç§æ–¹å¼ï¼Œç›¸æ¯”äºé”ï¼Œæœ‰ç‚¹è¿™ç§ç©ºé—´æ¢æ—¶é—´çš„è¿™ç§æ„æ€äº†ï¼Œä»–ä¸»è¦æ˜¯é€šè¿‡åˆ›å»ºæ¯ä¸ªçº¿ç¨‹çš„å†…éƒ¨å˜é‡ï¼Œæ¥å®ç°è¿™ç§çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚æŸç§ç¨‹åº¦ä¸Šå®ç°äº†çº¿ç¨‹å†…éƒ¨çš„èµ„æºå…±äº«ã€‚ä»–çš„åº•å±‚æ˜¯ä¼šå»ç»´æŠ¤ä¸€ä¸ªThreadLocalMapçš„å˜é‡ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªEntryæ•°ç»„ï¼Œä»–çš„keyå°±æ˜¯è¿™ä¸ªçº¿ç¨‹ï¼Œvalueå°±æ˜¯è¿™ä¸ªçº¿ç¨‹çš„æœ¬åœ°å˜é‡ï¼Œè¿™ä¸ªThreadLocalä¸»è¦æä¾›äº†ä¸‰ä¸ªAPIæ¥å»è°ƒç”¨ï¼Œä¸€ä¸ªå°±æ˜¯setï¼Œä¸€ä¸ªå°±æ˜¯getï¼Œå¦ä¸€ä¸ªå°±æ˜¯removeï¼Œéƒ½æ˜¯æ ¹æ®keyå»è¿›è¡Œä¸€äº›æ·»åŠ åˆ é™¤çš„æ“ä½œï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¦‚æœå‡ºäº‹ä¸ºç©ºï¼Œä¼šé¦–å…ˆå»åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„Mapã€‚å…¶ä¸­è¿™ä¸ªremoveæ–¹æ³•ç‰¹åˆ«é‡è¦ï¼Œå®ƒå¯ä»¥é˜²æ­¢ä¸€ä¸ªå†…å­˜æ³„éœ²çš„é—®é¢˜ã€‚é¦–å…ˆè¿™ä¸ªå†…å­˜æ³„éœ²çš„æ¦‚å¿µå°±æ˜¯ï¼Œæœ‰ä¸€ä¸ªå¯¹è±¡æ— æ³•è¢«GCå»å›æ”¶ï¼Œä½†æ˜¯ä¸€ç›´å ç€å†…å­˜ï¼Œå¦‚æœæ³„éœ²è¶Šæ¥è¶Šå¤šï¼Œä¼šå¯¼è‡´å†…å­˜ä¸å¤Ÿç”¨ï¼Œç³»ç»Ÿå´©æºƒï¼Œäº§ç”Ÿè¿™ç§å†…å­˜æ³„éœ²çš„åŸå› å°±æ˜¯ï¼Œè¿™ä¸ªMapä¸­çš„keyæ˜¯ä¸€ä¸ªå¼±å¼•ç”¨ï¼Œè€Œè¿™ä¸ªvalueæ˜¯ä¸€ä¸ªå¼ºå¼•ç”¨ï¼Œå‰è€…GCæ‰«æåˆ°å°±ä¼šå°½å¯èƒ½å»å¿«é€Ÿå›æ”¶ï¼Œä½†æ˜¯åè€…ä¸ä¼šï¼Œå› ä¸ºæ˜¯å¼ºå¼•ç”¨ï¼Œjvmå®å¯å»OOMï¼Œæ‰€ä»¥æœ‰å¯èƒ½å‡ºç°keyå·²ç»è¢«å›æ”¶äº†ï¼Œä½†æ˜¯valueä¸€ç›´æ²¡è¢«å›æ”¶ï¼Œäº§ç”Ÿäº†å†…å­˜æ³„éœ²è¿™ä¸ªç°è±¡ã€‚</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/Cnjszzw/cnjszzw.github.io/tree/master/docs/defaultDoc/Java/å¹¶å‘ç¼–ç¨‹.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/defaultDoc/Java/åŠ¨æ€ä»£ç†"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">åŠ¨æ€ä»£ç†</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/defaultDoc/Java/é›†åˆ"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Javaé›†åˆ</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#åŸºç¡€" class="table-of-contents__link toc-highlight">åŸºç¡€</a></li><li><a href="#1çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«" class="table-of-contents__link toc-highlight">1.çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="#2å¹¶è¡Œä¸å¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«" class="table-of-contents__link toc-highlight">2.å¹¶è¡Œä¸å¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li><li><a href="#3åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼æœ‰å“ªäº›æœ‰ä»€ä¹ˆåŒºåˆ«" class="table-of-contents__link toc-highlight">3.åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li><li><a href="#4çº¿ç¨‹ç±»ä¸­çš„runå’Œstartæ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«" class="table-of-contents__link toc-highlight">4.çº¿ç¨‹ç±»ä¸­çš„run()å’Œstart()æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li><li><a href="#5çº¿ç¨‹åŒ…æ‹¬å“ªäº›çŠ¶æ€çŠ¶æ€ä¹‹é—´æ˜¯å¦‚ä½•å˜åŒ–çš„" class="table-of-contents__link toc-highlight">5.çº¿ç¨‹åŒ…æ‹¬å“ªäº›çŠ¶æ€ï¼ŒçŠ¶æ€ä¹‹é—´æ˜¯å¦‚ä½•å˜åŒ–çš„ï¼Ÿ</a></li><li><a href="#6å¦‚ä½•è®©çº¿ç¨‹æŒ‰ç…§æŒ‡å®šçš„é¡ºåºå»æ‰§è¡Œå‘¢" class="table-of-contents__link toc-highlight">6.å¦‚ä½•è®©çº¿ç¨‹æŒ‰ç…§æŒ‡å®šçš„é¡ºåºå»æ‰§è¡Œå‘¢ï¼Ÿ</a></li><li><a href="#7notifyå’Œnotifyallçš„åŒºåˆ«" class="table-of-contents__link toc-highlight">7.notify()å’ŒnotifyAll()çš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="#8åœ¨javaä¸­waitå’Œè¿™ä¸ªsleepæ–¹æ³•æœ‰ä½•ä¸åŒ" class="table-of-contents__link toc-highlight">8.åœ¨javaä¸­ï¼Œwait()å’Œè¿™ä¸ªsleep()æ–¹æ³•æœ‰ä½•ä¸åŒï¼Ÿ</a></li><li><a href="#9å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹" class="table-of-contents__link toc-highlight">9.å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ</a></li><li><a href="#çº¿ç¨‹å®‰å…¨" class="table-of-contents__link toc-highlight">çº¿ç¨‹å®‰å…¨</a></li><li><a href="#1synchronizedå…³é”®è¯çš„åº•å±‚åŸç†" class="table-of-contents__link toc-highlight">1.synchronizedå…³é”®è¯çš„åº•å±‚åŸç†ï¼Ÿ</a></li><li><a href="#2monitorå®ç°çš„é”å±äºé‡é‡çº§é”ä½ äº†è§£è¿‡é”å‡çº§å—" class="table-of-contents__link toc-highlight">2.Monitorå®ç°çš„é”å±äºé‡é‡çº§é”ï¼Œä½ äº†è§£è¿‡é”å‡çº§å—ï¼Ÿ</a></li><li><a href="#3jmmäº†è§£å—javaå†…å­˜æ¨¡å‹-ps-ä¸æ˜¯javaå†…å­˜ç»“æ„" class="table-of-contents__link toc-highlight">3.JMMäº†è§£å—ï¼Ÿï¼ˆJavaå†…å­˜æ¨¡å‹ PS ï¼šä¸æ˜¯Javaå†…å­˜ç»“æ„ï¼‰</a></li><li><a href="#4casäº†è§£å—" class="table-of-contents__link toc-highlight">4.CASäº†è§£å—ï¼Ÿ</a></li><li><a href="#5è¯·ä½ è°ˆè°ˆå¯¹volatileå…³é”®å­—çš„ç†è§£" class="table-of-contents__link toc-highlight">5.è¯·ä½ è°ˆè°ˆå¯¹volatileå…³é”®å­—çš„ç†è§£</a></li><li><a href="#6ä»€ä¹ˆæ˜¯aqs" class="table-of-contents__link toc-highlight">6.ä»€ä¹ˆæ˜¯AQS</a></li><li><a href="#7ä»€ä¹ˆæ˜¯reentrantlockåº•å±‚åŸç†æ˜¯ä»€ä¹ˆ" class="table-of-contents__link toc-highlight">7.ä»€ä¹ˆæ˜¯ReentrantLockï¼Œåº•å±‚åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li><a href="#8synchronizedå’Œlockæœ‰ä»€ä¹ˆåŒºåˆ«" class="table-of-contents__link toc-highlight">8.synchronizedå’Œlockæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li><li><a href="#9æ­»é”äº§ç”Ÿçš„æ¡ä»¶æ˜¯ä»€ä¹ˆå¦‚ä½•è¯Šæ–­" class="table-of-contents__link toc-highlight">9.æ­»é”äº§ç”Ÿçš„æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•è¯Šæ–­ï¼Ÿ</a></li><li><a href="#10èŠä¸€ä¸‹è¿™ä¸ªconcurrenthashmap" class="table-of-contents__link toc-highlight">10.èŠä¸€ä¸‹è¿™ä¸ªConcurrentHashMap</a></li><li><a href="#11å¯¼è‡´å¹¶å‘ç¨‹åºå‡ºç°é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆjavaç¨‹åºä¸­æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹çš„æ‰§è¡Œå®‰å…¨" class="table-of-contents__link toc-highlight">11.å¯¼è‡´å¹¶å‘ç¨‹åºå‡ºç°é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆJavaç¨‹åºä¸­æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹çš„æ‰§è¡Œå®‰å…¨ï¼‰</a></li><li><a href="#çº¿ç¨‹æ± " class="table-of-contents__link toc-highlight">çº¿ç¨‹æ± </a></li><li><a href="#1è¯´ä¸€ä¸‹çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°çº¿ç¨‹æ± çš„æ‰§è¡ŒåŸç†çŸ¥é“å—" class="table-of-contents__link toc-highlight">1.è¯´ä¸€ä¸‹çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°ï¼ˆçº¿ç¨‹æ± çš„æ‰§è¡ŒåŸç†çŸ¥é“å—ï¼Ÿï¼‰</a></li><li><a href="#2çº¿ç¨‹æ± ä¸­æœ‰å“ªäº›é˜»å¡é˜Ÿåˆ—" class="table-of-contents__link toc-highlight">2.çº¿ç¨‹æ± ä¸­æœ‰å“ªäº›é˜»å¡é˜Ÿåˆ—ï¼Ÿ</a></li><li><a href="#3å¦‚ä½•ç¡®å®šæ ¸å¿ƒçº¿ç¨‹æ•°" class="table-of-contents__link toc-highlight">3.å¦‚ä½•ç¡®å®šæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Ÿ</a></li><li><a href="#4çº¿ç¨‹æ± çš„ç§ç±»æœ‰å“ªäº›" class="table-of-contents__link toc-highlight">4.çº¿ç¨‹æ± çš„ç§ç±»æœ‰å“ªäº›ï¼Ÿ</a></li><li><a href="#5ä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨è¿™ä¸ªexecutorså»åˆ›å»ºçº¿ç¨‹æ± " class="table-of-contents__link toc-highlight">5.ä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨è¿™ä¸ªExecutorså»åˆ›å»ºçº¿ç¨‹æ± </a></li><li><a href="#ä½¿ç”¨åœºæ™¯" class="table-of-contents__link toc-highlight">ä½¿ç”¨åœºæ™¯</a></li><li><a href="#1åœºæ™¯1esæ‰¹é‡æ•°æ®å¯¼å…¥" class="table-of-contents__link toc-highlight">1.åœºæ™¯1ï¼šESæ‰¹é‡æ•°æ®å¯¼å…¥</a></li><li><a href="#2åœºæ™¯2æ•°æ®æ±‡æ€»" class="table-of-contents__link toc-highlight">2.åœºæ™¯2ï¼šæ•°æ®æ±‡æ€»</a></li><li><a href="#3åœºæ™¯3å¼‚æ­¥è°ƒç”¨" class="table-of-contents__link toc-highlight">3.åœºæ™¯3ï¼šå¼‚æ­¥è°ƒç”¨</a></li><li><a href="#4å¦‚ä½•æ§åˆ¶æŸä¸ªæ–¹æ³•å…è®¸å¹¶å‘è®¿é—®çº¿ç¨‹çš„æ•°é‡" class="table-of-contents__link toc-highlight">4.å¦‚ä½•æ§åˆ¶æŸä¸ªæ–¹æ³•å…è®¸å¹¶å‘è®¿é—®çº¿ç¨‹çš„æ•°é‡</a></li><li><a href="#5è¯·ä½ è°ˆè°ˆå¯¹threadlocalçš„ç†è§£" class="table-of-contents__link toc-highlight">5.è¯·ä½ è°ˆè°ˆå¯¹ThreadLocalçš„ç†è§£</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>