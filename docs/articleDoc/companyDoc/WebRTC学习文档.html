<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-articleDoc/companyDoc/WebRTC学习文档" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">一、内容概述 | INFO.CENTER</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://cnjszzw.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://cnjszzw.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://cnjszzw.github.io/docs/articleDoc/companyDoc/WebRTC学习文档"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="一、内容概述 | INFO.CENTER"><meta data-rh="true" name="description" content="主要参考以下链接的文章，这个文章是一个WebRTC的快速入门指南。"><meta data-rh="true" property="og:description" content="主要参考以下链接的文章，这个文章是一个WebRTC的快速入门指南。"><link data-rh="true" rel="icon" href="/img/my-logo.svg"><link data-rh="true" rel="canonical" href="https://cnjszzw.github.io/docs/articleDoc/companyDoc/WebRTC学习文档"><link data-rh="true" rel="alternate" href="https://cnjszzw.github.io/docs/articleDoc/companyDoc/WebRTC学习文档" hreflang="en"><link data-rh="true" rel="alternate" href="https://cnjszzw.github.io/docs/articleDoc/companyDoc/WebRTC学习文档" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="INFO.CENTER RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="INFO.CENTER Atom Feed">





<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CCYCB23FSV"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-CCYCB23FSV",{})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-NQ553VVM",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/assets/css/styles.fc76cd85.css">
<script src="/assets/js/runtime~main.b5d9ab4e.js" defer="defer"></script>
<script src="/assets/js/main.dfe21979.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>




<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NQ553VVM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus"><link rel="preload" as="image" href="/img/my-logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/my-logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/my-logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">INFO.CENTER</b></a><a class="navbar__item navbar__link" href="/docs/defaultDoc/Intro">文档</a><a class="navbar__item navbar__link" href="/docs/interviewDoc/HR面试指南">面试</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/articleDoc/技术文章推荐">学习</a><a class="navbar__item navbar__link" href="/blog">博客</a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><a href="https://cnjszzw.github.io/cv/zh-cn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">OhMyCV<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/articleDoc/技术文章推荐">技术文章推荐</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/articleDoc/companyDoc/WebRTC学习文档">companyDoc</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/articleDoc/companyDoc/WebRTC学习文档">一、内容概述</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articleDoc/companyDoc/temp">temp</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articleDoc/companyDoc/wvb-server">wvb-server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articleDoc/companyDoc/wvb-ui">wvb-ui</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articleDoc/companyDoc/wvb-ui前端项目结构">wvb-ui前端项目结构</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articleDoc/companyDoc/wvb">wvb</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articleDoc/companyDoc/上海寰创通信">信息</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articleDoc/companyDoc/业务">业务文档</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articleDoc/companyDoc/前端项目结构文档">前端项目结构总结</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articleDoc/companyDoc/可视化视频调度指挥平台 流程与原理-笔记">可视化视频调度指挥平台 流程与原理-笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articleDoc/companyDoc/国标点播流程">国标点播流程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articleDoc/companyDoc/实时音视频技术学习文档">实时音视频技术学习文档</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articleDoc/companyDoc/设计文档学习">设计文档学习</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/articleDoc/docusaurus">Docusaurus_Q&amp;A</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div style="position:relative"><div style="filter:blur(5px)"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">companyDoc</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">一、内容概述</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>一、内容概述</h1></header>
<p>主要参考以下链接的文章，这个文章是一个WebRTC的快速入门指南。</p>
<div class="language-url codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-url codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http://www.52im.net/thread-4184-1-1.html</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1>二、什么是WebRTC</h1>
<p>中文翻译过来就叫网页即时通信（Web Real-Time Communication），是一个支持网页浏览器进行实时语音对话或视频对话的技术方案。注意区分下P2P、UDP、WebRTC的区别。</p>
<h1>三、为什么需要WebRTC</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="31我们为何要建立-webrtc">3.1、我们为何要建立 WebRTC？<a href="#31我们为何要建立-webrtc" class="hash-link" aria-label="Direct link to 3.1、我们为何要建立 WebRTC？" title="Direct link to 3.1、我们为何要建立 WebRTC？">​</a></h2>
<p>P2P是架构（常见的种子文件共享也是用的这个），UDP是传输层协议，类似TCP，而WebRTC接近于HTTP这种应用层协议的定位，本质上 是 P2P 模式的实时通信框架，依赖 UDP 和自定义协议，WebRTC 不是单一协议，而是<strong>协议集合</strong> （如 RTP/RTCP、DTLS、ICE 等）和<strong>API 标准</strong>。</p>
<table><thead><tr><th>概念</th><th>层级/类型</th><th>作用</th><th>关键特性</th></tr></thead><tbody><tr><td><strong>P2P</strong></td><td>网络架构</td><td>设备直接通信，减少中转延迟，适合实时场景（如直播、视频会议）。</td><td>去中心化、低延迟、直接传输，依赖 NAT 穿透技术（如 ICE、STUN/TURN）。</td></tr><tr><td><strong>UDP</strong></td><td>传输层协议</td><td>提供无连接、不可靠但低延迟的数据传输，适合实时音视频场景。</td><td>无握手、无重传、无拥塞控制，需应用层自行处理可靠性（如 WebRTC 封装）。</td></tr><tr><td><strong>WebRTC</strong></td><td>应用层框架</td><td>基于 UDP 的实时音视频通信标准，支持浏览器和设备间的 P2P 通信。</td><td>封装 UDP 实现加密（DTLS）、拥塞控制、NAT 穿透，提供标准化 API（如 <code>RTCPeerConnection</code>）。</td></tr></tbody></table>
<p><strong>关键关系</strong></p>
<ol>
<li><strong>层级依赖</strong>：<!-- -->
<ul>
<li>WebRTC（应用层） → 封装 UDP（传输层） → 实现 P2P（网络架构）。</li>
</ul>
</li>
<li><strong>协议协作</strong>：<!-- -->
<ul>
<li>UDP 提供低延迟传输，WebRTC 补充可靠性与安全性，P2P 确保直接路径。</li>
</ul>
</li>
<li><strong>适用场景</strong>：<!-- -->
<ul>
<li>实时音视频（直播、会议）优先选择 <strong>P2P + UDP + WebRTC</strong> 组合。</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="32在-webrtc-中究竟发生了哪些事呢">3.2、在 WebRTC 中究竟发生了哪些事呢？<a href="#32在-webrtc-中究竟发生了哪些事呢" class="hash-link" aria-label="Direct link to 3.2、在 WebRTC 中究竟发生了哪些事呢？" title="Direct link to 3.2、在 WebRTC 中究竟发生了哪些事呢？">​</a></h2>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-互相介绍自己"><strong>1. 互相“介绍自己”</strong><a href="#1-互相介绍自己" class="hash-link" aria-label="Direct link to 1-互相介绍自己" title="Direct link to 1-互相介绍自己">​</a></h3>
<ul>
<li><strong>A 和 B 各自写一份“简历”（SDP）</strong>：<!-- -->
<ul>
<li>我的联系方式（IP 地址、端口）</li>
<li>我能发什么视频（支持的格式，比如高清/标清）</li>
<li>我想怎么加密通话（安全协议）</li>
</ul>
</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-通过朋友交换简历"><strong>2. 通过“朋友”交换简历</strong><a href="#2-通过朋友交换简历" class="hash-link" aria-label="Direct link to 2-通过朋友交换简历" title="Direct link to 2-通过朋友交换简历">​</a></h3>
<ul>
<li><strong>找中间人传话</strong>：<!-- -->
<ul>
<li>A 和 B 用微信、邮件、甚至喊一嗓子，把简历给对方。</li>
<li><strong>注意</strong>：中间人只负责传简历，不参与后续通话！</li>
</ul>
</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-找到最快的通话路径"><strong>3. 找到最快的通话路径</strong><a href="#3-找到最快的通话路径" class="hash-link" aria-label="Direct link to 3-找到最快的通话路径" title="Direct link to 3-找到最快的通话路径">​</a></h3>
<ul>
<li><strong>尝试所有可能的路</strong>：<!-- -->
<ul>
<li>直接打电话（P2P 直连）</li>
<li>通过运营商转接（STUN 服务器穿透 NAT）</li>
<li>实在不行用快递（TURN 服务器中继，兜底用）</li>
</ul>
</li>
<li><strong>选最快的路</strong>：通常是直接通话，延迟最低！</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-开始加密通话"><strong>4. 开始加密通话</strong><a href="#4-开始加密通话" class="hash-link" aria-label="Direct link to 4-开始加密通话" title="Direct link to 4-开始加密通话">​</a></h3>
<ul>
<li><strong>加密通道</strong>：用简历里约定的密码（DTLS）加密，防止偷听。</li>
<li><strong>实时传输</strong>：边说话边调整音量（动态码率），保证不卡顿。</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="为什么不用中间人直接传话"><strong>为什么不用中间人直接传话？</strong><a href="#为什么不用中间人直接传话" class="hash-link" aria-label="Direct link to 为什么不用中间人直接传话" title="Direct link to 为什么不用中间人直接传话">​</a></h3>
<ul>
<li><strong>中间人太慢</strong>：就像快递绕道北京再到上海，P2P 是直达航班！</li>
<li><strong>省钱省资源</strong>：不经过服务器，带宽成本归用户自己（比如直播平台省流量）。</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="一句话总结"><strong>一句话总结</strong><a href="#一句话总结" class="hash-link" aria-label="Direct link to 一句话总结" title="Direct link to 一句话总结">​</a></h3>
<p><strong>WebRTC = 先通过朋友互相认识（交换 SDP），然后直接打电话（P2P），选最快的路，加密防偷听。</strong></p>
<h1>四、WebRTC 的关键技术和概念</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="41概述">4.1、概述<a href="#41概述" class="hash-link" aria-label="Direct link to 4.1、概述" title="Direct link to 4.1、概述">​</a></h2>
<p>对主要解释了WebRTC 的各项关键技术和概念。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Q NAT是什么？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Q STUN是什么？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Q TURN是什么？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Q ICE、SDP是什么？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Q 信令交换是什么？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Q wbeRTC为什么需要内网穿透？仅仅使用NAT不可以吗？</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="42nat">4.2、NAT<a href="#42nat" class="hash-link" aria-label="Direct link to 4.2、NAT" title="Direct link to 4.2、NAT">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-什么是-nat一句话解释"><strong>1. 什么是 NAT？一句话解释</strong><a href="#1-什么是-nat一句话解释" class="hash-link" aria-label="Direct link to 1-什么是-nat一句话解释" title="Direct link to 1-什么是-nat一句话解释">​</a></h3>
<p><strong>NAT（网络地址转换）</strong> = 路由器的“翻译官”</p>
<ul>
<li><strong>作用</strong>：让你家多台设备（手机、电脑）共用一个公网 IP 上网。</li>
<li><strong>问题</strong>：外网设备找不到你家的内网设备（比如你的电脑），因为内网 IP 是“隐形”的。</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-举个栗子你家电脑如何访问网站"><strong>2. 举个栗子：你家电脑如何访问网站？</strong><a href="#2-举个栗子你家电脑如何访问网站" class="hash-link" aria-label="Direct link to 2-举个栗子你家电脑如何访问网站" title="Direct link to 2-举个栗子你家电脑如何访问网站">​</a></h3>
<ul>
<li>
<p><strong>场景</strong>：你的电脑（内网 IP <code>10.0.0.2</code>）想访问网站服务器（公网 IP <code>4.4.4.4:80</code>）。</p>
</li>
<li>
<p><strong>步骤</strong>：</p>
<ol>
<li>
<p><strong>电脑发请求</strong>：电脑生成数据包，写上“我要访问 <code>4.4.4.4:80</code>”，<strong>源地址</strong>填自己的内网 IP <code>10.0.0.2</code>。</p>
</li>
<li>
<p><strong>路由器翻译</strong>：</p>
<ul>
<li>路由器收到请求，发现目标地址是外网（怎么发现的？是通过子网掩码的运算），立刻变身“翻译官”：<!-- -->
<ul>
<li>把 <strong>源地址</strong> 从 <code>10.0.0.2</code> 改成自己的公网 IP <code>5.5.5.5</code>，</li>
<li>随机分配一个端口（比如 <code>3333</code>），并记下“小本本”：<!-- -->
<blockquote>
<p><code>5.5.5.5:3333</code> → <code>10.0.0.2</code></p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>服务器回复</strong>：网站服务器收到请求，回复数据包发到 <code>5.5.5.5:3333</code>。</p>
</li>
<li>
<p><strong>路由器再翻译</strong>：</p>
<ul>
<li>路由器查“小本本”，把目标地址 <code>5.5.5.5:3333</code> 转回 <code>10.0.0.2</code>，数据包成功送到你电脑！</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-nat-的四种门卫模式"><strong>3. NAT 的四种“门卫模式”</strong><a href="#3-nat-的四种门卫模式" class="hash-link" aria-label="Direct link to 3-nat-的四种门卫模式" title="Direct link to 3-nat-的四种门卫模式">​</a></h3>
<p>路由器的“严格程度”不同，影响外网能否主动找到你：</p>
<table><thead><tr><th><strong>模式</strong></th><th><strong>规则</strong></th><th><strong>类比</strong></th></tr></thead><tbody><tr><td><strong>完全开放型</strong></td><td>任何外网设备发到 <code>5.5.5.5:3333</code> 的数据，都转给 <code>10.0.0.2</code>。</td><td>小区门卫：只要快递寄到你家地址，不管是谁寄的，直接放行。</td></tr><tr><td><strong>半开放型</strong></td><td>只转给之前联系过的 IP（比如 <code>4.4.4.4</code>），其他 IP 的快递拒收。</td><td>门卫：只收你之前买过东西的商家快递。</td></tr><tr><td><strong>较严格型</strong></td><td>只收特定 IP + 端口的快递（比如 <code>4.4.4.4:80</code>），其他全拒。</td><td>门卫：必须是某商家的某个分店寄的快递才收。</td></tr><tr><td><strong>最严格型（对称NAT）</strong></td><td>快递必须是 <strong>同一商家、同一分店、同一快递员</strong> 寄的，否则拒收。</td><td>门卫：连快递员换了个工牌都不行，直接扔掉！</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-webrtc-如何突破-nat"><strong>4. WebRTC 如何突破 NAT？</strong><a href="#4-webrtc-如何突破-nat" class="hash-link" aria-label="Direct link to 4-webrtc-如何突破-nat" title="Direct link to 4-webrtc-如何突破-nat">​</a></h3>
<ul>
<li><strong>问题</strong>：WebRTC 需要两台内网设备直接通话（比如视频聊天），但 NAT 挡在中间。</li>
<li><strong>解决工具</strong>：<!-- -->
<ul>
<li><strong>STUN 服务器</strong>：像“侦察兵”，帮你找到自己的公网 IP 和端口。</li>
<li><strong>TURN 服务器</strong>：如果 NAT 太严格（比如对称型），直接通过它中转数据（备用方案）。</li>
</ul>
</li>
<li><strong>关键结论</strong>：<!-- -->
<ul>
<li>前三种 NAT 可通过 STUN 穿透，WebRTC 正常工作。</li>
<li>对称 NAT 必须依赖 TURN 服务器（性能差，成本高）。</li>
</ul>
</li>
</ul>
<hr>
<p><strong>一句话总结</strong>：NAT 是路由器的“隐形斗篷”，WebRTC 需要 STUN/TURN 这类“破隐符”才能穿透斗篷，实现直接通话！</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="43stun">4.3、STUN<a href="#43stun" class="hash-link" aria-label="Direct link to 4.3、STUN" title="Direct link to 4.3、STUN">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-什么是-stun一句话解释"><strong>1. 什么是 STUN？一句话解释</strong><a href="#1-什么是-stun一句话解释" class="hash-link" aria-label="Direct link to 1-什么是-stun一句话解释" title="Direct link to 1-什么是-stun一句话解释">​</a></h3>
<p><strong>STUN（Session Traversal Utilities for NAT）</strong> = 帮你“照镜子”的服务器</p>
<ul>
<li><strong>作用</strong>：让内网设备（如你的电脑）知道自己在公网的“形象”（Public IP + Port）。</li>
<li><strong>限制</strong>：能搞定前三种 NAT（完全开放/半开放/较严格），但搞不定最严格的对称 NAT。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-举个栗子stun-如何帮你照镜子"><strong>2. 举个栗子：STUN 如何帮你“照镜子”？</strong><a href="#2-举个栗子stun-如何帮你照镜子" class="hash-link" aria-label="Direct link to 2-举个栗子stun-如何帮你照镜子" title="Direct link to 2-举个栗子stun-如何帮你照镜子">​</a></h3>
<ul>
<li>
<p><strong>场景</strong>：你的电脑（内网 IP <code>10.0.0.2</code>）想知道自己在公网的“形象”。</p>
</li>
<li>
<p><strong>步骤</strong>：</p>
<ol>
<li>
<p><strong>发请求</strong>：电脑向 STUN 服务器（如 <code>stun.l.google.com:19302</code>）发送一个“照镜子”请求。</p>
</li>
<li>
<p><strong>路由器翻译</strong>：</p>
<ul>
<li>路由器把请求的源地址 <code>10.0.0.2</code> 改成自己的公网 IP <code>5.5.5.5</code>，</li>
<li>随机分配端口 <code>3333</code>，并记下“小本本”：<!-- -->
<blockquote>
<p><code>5.5.5.5:3333</code> → <code>10.0.0.2</code></p>
</blockquote>
</li>
</ul>
</li>
<li>
<p><strong>STUN 服务器反馈</strong>：</p>
<ul>
<li>服务器收到请求后，直接读取数据包的来源地址（即 <code>5.5.5.5:3333</code>），</li>
<li>把这个公网“形象”打包成响应，发回给你的电脑。</li>
</ul>
</li>
<li>
<p><strong>你的电脑觉醒</strong>：</p>
<ul>
<li>现在你知道了：“我在外网看来是 <code>5.5.5.5:3333</code>！”</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-stun-的超能力与死穴"><strong>3. STUN 的“超能力”与“死穴”</strong><a href="#3-stun-的超能力与死穴" class="hash-link" aria-label="Direct link to 3-stun-的超能力与死穴" title="Direct link to 3-stun-的超能力与死穴">​</a></h3>
<table><thead><tr><th><strong>NAT 类型</strong></th><th><strong>STUN 能否穿透？</strong></th><th><strong>为什么？</strong></th></tr></thead><tbody><tr><td><strong>完全开放型</strong></td><td>✅ 轻松穿透</td><td>外网设备直接通过 <code>5.5.5.5:3333</code> 找到你，无需任何条件。</td></tr><tr><td><strong>半开放型</strong></td><td>✅ 需要“预热”</td><td>第一次连接会失败，需先通过服务器交换信息，让路由器记录对方的 IP。</td></tr><tr><td><strong>较严格型</strong></td><td>✅ 需要“精准预热”</td><td>不仅要记录对方的 IP，还要固定端口（比如 <code>4.4.4.4:80</code>）。</td></tr><tr><td><strong>对称 NAT</strong></td><td>❌ 完全无效</td><td>路由器每次连接都分配新端口，STUN 给的“形象”会失效，必须用 TURN 中转。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-一句话总结-stun-的用途"><strong>4. 一句话总结 STUN 的用途</strong><a href="#4-一句话总结-stun-的用途" class="hash-link" aria-label="Direct link to 4-一句话总结-stun-的用途" title="Direct link to 4-一句话总结-stun-的用途">​</a></h3>
<p><strong>STUN = 快速低成本的“破隐符”</strong></p>
<ul>
<li>帮你快速找到自己的公网地址，让 WebRTC 等应用能直接“穿墙”通信。</li>
<li><strong>但遇到对称 NAT 时</strong>：必须召唤更强大的 <strong>TURN 服务器</strong>（相当于花钱雇快递中转站）。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="附公共-stun-服务器直接可用"><strong>附：公共 STUN 服务器（直接可用）</strong><a href="#附公共-stun-服务器直接可用" class="hash-link" aria-label="Direct link to 附公共-stun-服务器直接可用" title="Direct link to 附公共-stun-服务器直接可用">​</a></h3>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">stun1.l.google.com:19302  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stun2.l.google.com:19302  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stun3.l.google.com:19302  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stun4.l.google.com:19302  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stun.stunprotocol.org:3478  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="44turn">4.4、TURN<a href="#44turn" class="hash-link" aria-label="Direct link to 4.4、TURN" title="Direct link to 4.4、TURN">​</a></h2>
<p><strong>对称 NAT 的路由器“反复无常”</strong> ：每次连接外部地址时，都会分配<strong>随机端口</strong> ，导致 STUN 获取的公网地址瞬间失效，只能通过 TURN 服务器中转数据。所有的通信内容都要经过 TURN 服务器的转发</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="45ice">4.5、ICE<a href="#45ice" class="hash-link" aria-label="Direct link to 4.5、ICE" title="Direct link to 4.5、ICE">​</a></h2>
<p><strong>ICE 是 WebRTC 的“智能路径导航”</strong>：</p>
<ol>
<li><strong>收集所有可能的地址</strong>（本地 IP、STUN 公网地址、TURN 中转地址）。</li>
<li><strong>自动测试并选择最优路径</strong>：优先直连，失败则用中转，确保穿透 NAT 和防火墙。<br>
<strong>一句话总结</strong>：ICE 通过整合多种地址候选，自动化解决复杂网络下的连接问题。</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="46sdp">4.6、SDP<a href="#46sdp" class="hash-link" aria-label="Direct link to 4.6、SDP" title="Direct link to 4.6、SDP">​</a></h2>
<p><strong>SDP 是 WebRTC 的“会话说明书”</strong>：</p>
<ol>
<li><strong>核心作用</strong>：用文本格式描述双方的媒体能力（如视频编解码器）、网络信息（IP/端口）、安全配置等，帮助两端协商匹配参数。</li>
<li><strong>无关传输</strong>：SDP 只是数据格式（像配置文件），不关心如何传递（可通过 WebSocket、HTTP 等任意方式交换）。<br>
<strong>一句话总结</strong>：SDP 是包含媒体、网络、安全等元数据的“连接指南”，让双方设备能互相理解并建立通信。</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="47signaling信令交换">4.7、Signaling（信令交换）<a href="#47signaling信令交换" class="hash-link" aria-label="Direct link to 4.7、Signaling（信令交换）" title="Direct link to 4.7、Signaling（信令交换）">​</a></h2>
<p><strong>信令（Signaling）是 WebRTC 的“快递员”</strong>：</p>
<ol>
<li><strong>核心任务</strong>：将 SDP（含 ICE 候选地址）通过<strong>任意方式</strong>（WebSocket、QR 码、邮件等）传递给对方。</li>
<li><strong>无关技术</strong>：只要能传递字符串即可，具体用 Twitter、HTTP 还是二维码不重要。<br>
<strong>一句话总结</strong>：信令是“传递连接信息”的过程，确保双方拿到彼此的 SDP 和网络参数</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="48小结">4.8、小结<a href="#48小结" class="hash-link" aria-label="Direct link to 4.8、小结" title="Direct link to 4.8、小结">​</a></h2>
<p>一个典型的WebRTC通信流程是这样的：</p>
<p>1）A 想要和B建立连接；</p>
<p>2）A 创建了一个 offer，它寻找所有的 ICE candidate、安全选项、音视频选项等并创建 SDP（简单来说这个 offer 就是 SDP）；</p>
<p>3）A 将 SDP 信令传递给 B（Signaling）；</p>
<p>4）B 根据 A 的 offer 进行设置，并创建应答（answer）；</p>
<p>5）B 将 Answer 信令传递给 A（Signaling）；</p>
<p>6）连接建立。</p>
<h1>五、WebRTC 的信令（Signal）</h1>
<p><strong>用快递比喻 WebRTC 信令：</strong></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-信令是什么"><strong>1. 信令是什么？</strong><a href="#1-信令是什么" class="hash-link" aria-label="Direct link to 1-信令是什么" title="Direct link to 1-信令是什么">​</a></h3>
<p><strong>信令 = 快递员</strong></p>
<ul>
<li><strong>作用</strong>：帮你传递“怎么连接”的说明书（SDP）和“可能的地址”（ICE 候选）。</li>
<li><strong>三步任务</strong>：<!-- -->
<ol>
<li>送出发起连接的请求（比如“我要视频通话”）。</li>
<li>交换双方的“收件地址”（公网 IP + 端口）。</li>
<li>协商用什么格式通话（比如 1080p 视频、Opus 音频）。</li>
</ol>
</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-为什么需要信令"><strong>2. 为什么需要信令？</strong><a href="#2-为什么需要信令" class="hash-link" aria-label="Direct link to 2-为什么需要信令" title="Direct link to 2-为什么需要信令">​</a></h3>
<ul>
<li><strong>找不到对方</strong>：你的设备在内网（如家里），外网看不到你的地址，需要快递员（信令）传递信息。</li>
<li><strong>统一规则</strong>：双方需协商用什么“语言”通话（比如都用 H.264 编码）。</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-信令服务器的作用"><strong>3. 信令服务器的作用</strong><a href="#3-信令服务器的作用" class="hash-link" aria-label="Direct link to 3-信令服务器的作用" title="Direct link to 3-信令服务器的作用">​</a></h3>
<ul>
<li><strong>临时工具</strong>：像快递中转站，只负责传递连接信息，不参与实际通话。</li>
<li><strong>技术无关</strong>：可以用任何方式传递信息（微信、二维码、WebSocket 都行）。</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-stun-和-turn-的作用"><strong>4. STUN 和 TURN 的作用</strong><a href="#4-stun-和-turn-的作用" class="hash-link" aria-label="Direct link to 4-stun-和-turn-的作用" title="Direct link to 4-stun-和-turn-的作用">​</a></h3>
<ul>
<li><strong>STUN</strong>：帮你问路由器“我的公网地址是什么？”（适合普通家庭路由器）。</li>
<li><strong>TURN</strong>：如果 STUN 失败（比如公司防火墙），直接通过它中转数据（像备用快递仓库）。</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-sdp-请求与答复"><strong>5. SDP 请求与答复</strong><a href="#5-sdp-请求与答复" class="hash-link" aria-label="Direct link to 5-sdp-请求与答复" title="Direct link to 5-sdp-请求与答复">​</a></h3>
<ul>
<li><strong>流程</strong>：<!-- -->
<ol>
<li><strong>你</strong>：生成一份“连接说明书”（SDP Offer），通过快递员发给对方。</li>
<li><strong>对方</strong>：收到后回复“我同意”或“我拒绝”（SDP Answer）。</li>
</ol>
</li>
</ul>
<hr>
<p><strong>一句话总结</strong>：<br>
<strong>信令就是“快递员”，帮你传递连接信息，让两个躲在内网的人找到彼此并开始通话！</strong></p>
<h1>六、WebRTC架构核心</h1>
<p><strong>1. 核心目标</strong>：用户间直接 P2P 通信，最小化延迟。</p>
<p><strong>2. 关键组件</strong>：</p>
<ul>
<li><strong>信令服务器</strong>：临时传递连接信息（SDP + ICE）。</li>
<li><strong>STUN/TURN</strong>：穿透 NAT（STUN 获取地址，TURN 中转数据）。</li>
<li><strong>RTCPeerConnection</strong>：管理音视频传输与加密。</li>
</ul>
<p><strong>3. 连接流程</strong>：</p>
<ol>
<li>通过信令交换 SDP 和 ICE 地址。</li>
<li>用 STUN 尝试直连，失败则改用 TURN。</li>
<li>建立 P2P 通道，数据直接传输。</li>
</ol>
<p><strong>4. 优势</strong>：低延迟、加密安全、无需插件。<br>
<strong>5. 缺陷</strong>：依赖服务器、大规模场景需改用集中式架构。</p>
<h1>七、WebRTC 的优缺点</h1>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="71-优点"><strong>7.1 优点</strong><a href="#71-优点" class="hash-link" aria-label="Direct link to 71-优点" title="Direct link to 71-优点">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-p2p-通信的高效性"><strong>1. P2P 通信的高效性</strong><a href="#1-p2p-通信的高效性" class="hash-link" aria-label="Direct link to 1-p2p-通信的高效性" title="Direct link to 1-p2p-通信的高效性">​</a></h3>
<ul>
<li><strong>低延迟</strong>：数据直接通过最优路径传输，无需经过第三方服务器。</li>
<li><strong>高性能</strong>：<!-- -->
<ul>
<li>使用 <strong>UDP 协议</strong>，适合实时音视频（如视频会议、直播）。</li>
<li>数据加密后直接传输，路由器仅负责转发，不解析内容。</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-标准化-api"><strong>2. 标准化 API</strong><a href="#2-标准化-api" class="hash-link" aria-label="Direct link to 2-标准化-api" title="Direct link to 2-标准化-api">​</a></h3>
<ul>
<li><strong>浏览器原生支持</strong>：无需额外安装插件或工具。</li>
<li><strong>开发便捷</strong>：提供简洁的 JavaScript API（如 <code>RTCPeerConnection</code>），快速实现音视频通信。</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="72-缺点"><strong>7.2 缺点</strong><a href="#72-缺点" class="hash-link" aria-label="Direct link to 72-缺点" title="Direct link to 72-缺点">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-依赖-stunturn-服务器"><strong>1. 依赖 STUN/TURN 服务器</strong><a href="#1-依赖-stunturn-服务器" class="hash-link" aria-label="Direct link to 1-依赖-stunturn-服务器" title="Direct link to 1-依赖-stunturn-服务器">​</a></h3>
<ul>
<li><strong>成本问题</strong>：<!-- -->
<ul>
<li><strong>STUN</strong>：轻量级，但仅解决部分 NAT 穿透问题。</li>
<li><strong>TURN</strong>：需维护高性能服务器（带宽、公网 IP），成本高昂。</li>
</ul>
</li>
<li><strong>维护复杂度</strong>：需确保服务器高可用性，否则影响通信稳定性。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-多人场景扩展性差"><strong>2. 多人场景扩展性差</strong><a href="#2-多人场景扩展性差" class="hash-link" aria-label="Direct link to 2-多人场景扩展性差" title="Direct link to 2-多人场景扩展性差">​</a></h3>
<ul>
<li><strong>连接数爆炸</strong>：<!-- -->
<ul>
<li>例如 100 个用户需建立 <strong>4950 条 P2P 连接</strong>（组合公式：<code>n(n-1)/2</code>）。</li>
<li>网络负载和带宽消耗随用户数激增。</li>
</ul>
</li>
<li><strong>适用场景限制</strong>：<!-- -->
<ul>
<li>适合 <strong>1对1 或小规模通信</strong>（如视频通话）。</li>
<li>大规模场景（如百人会议、游戏）需改用 <strong>集中式服务器</strong> 中转。</li>
</ul>
</li>
</ul>
<hr>
<p><strong>总结</strong>：</p>
<ul>
<li><strong>优势</strong>：低延迟、高性能、开发便捷，适合实时互动场景。</li>
<li><strong>劣势</strong>：依赖第三方服务器、大规模场景扩展性差。</li>
</ul>
<h1>八、WebSocket 与 WebRTC 的区别</h1>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-核心目标不同"><strong>1. 核心目标不同</strong><a href="#1-核心目标不同" class="hash-link" aria-label="Direct link to 1-核心目标不同" title="Direct link to 1-核心目标不同">​</a></h2>
<table><thead><tr><th><strong>技术</strong></th><th><strong>设计目的</strong></th><th><strong>典型场景</strong></th></tr></thead><tbody><tr><td><strong>WebSocket</strong></td><td>实现实时双向通信（如聊天、实时通知）。</td><td>聊天应用、股票行情推送。</td></tr><tr><td><strong>WebRTC</strong></td><td>低延迟音视频传输（如视频通话、直播）。</td><td>视频会议、在线教育、游戏。</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-技术差异"><strong>2. 技术差异</strong><a href="#2-技术差异" class="hash-link" aria-label="Direct link to 2-技术差异" title="Direct link to 2-技术差异">​</a></h2>
<table><thead><tr><th><strong>维度</strong></th><th><strong>WebSocket</strong></th><th><strong>WebRTC</strong></th></tr></thead><tbody><tr><td><strong>协议</strong></td><td>基于 <strong>TCP</strong>（可靠传输）。</td><td>基于 <strong>UDP</strong>（低延迟优先）。</td></tr><tr><td><strong>延迟</strong></td><td>较高（受 TCP 握手和重传影响）。</td><td>极低（优化实时性，容忍丢包）。</td></tr><tr><td><strong>传输内容</strong></td><td>文本、二进制数据。</td><td>音视频流（内置编解码优化）。</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-依赖关系"><strong>3. 依赖关系</strong><a href="#3-依赖关系" class="hash-link" aria-label="Direct link to 3-依赖关系" title="Direct link to 3-依赖关系">​</a></h2>
<ul>
<li><strong>WebRTC 依赖 WebSocket</strong>：<!-- -->
<ul>
<li>用于初始信令交换（传递 SDP 和 ICE 信息）。</li>
<li>连接建立后，音视频数据直接通过 P2P 传输，不再需要 WebSocket。</li>
</ul>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="一句话总结-1"><strong>一句话总结</strong><a href="#一句话总结-1" class="hash-link" aria-label="Direct link to 一句话总结-1" title="Direct link to 一句话总结-1">​</a></h2>
<ul>
<li><strong>WebSocket</strong>：通用实时数据通道（TCP 保可靠）。</li>
<li><strong>WebRTC</strong>：专用音视频传输（UDP 保实时）。</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/Cnjszzw/cnjszzw.github.io/tree/master/docs/articleDoc/companyDoc/WebRTC学习文档.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/articleDoc/技术文章推荐"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">技术文章推荐</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/articleDoc/companyDoc/temp"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">temp</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#31我们为何要建立-webrtc" class="table-of-contents__link toc-highlight">3.1、我们为何要建立 WebRTC？</a></li><li><a href="#32在-webrtc-中究竟发生了哪些事呢" class="table-of-contents__link toc-highlight">3.2、在 WebRTC 中究竟发生了哪些事呢？</a><ul><li><a href="#1-互相介绍自己" class="table-of-contents__link toc-highlight"><strong>1. 互相“介绍自己”</strong></a></li><li><a href="#2-通过朋友交换简历" class="table-of-contents__link toc-highlight"><strong>2. 通过“朋友”交换简历</strong></a></li><li><a href="#3-找到最快的通话路径" class="table-of-contents__link toc-highlight"><strong>3. 找到最快的通话路径</strong></a></li><li><a href="#4-开始加密通话" class="table-of-contents__link toc-highlight"><strong>4. 开始加密通话</strong></a></li><li><a href="#为什么不用中间人直接传话" class="table-of-contents__link toc-highlight"><strong>为什么不用中间人直接传话？</strong></a></li><li><a href="#一句话总结" class="table-of-contents__link toc-highlight"><strong>一句话总结</strong></a></li></ul></li><li><a href="#41概述" class="table-of-contents__link toc-highlight">4.1、概述</a></li><li><a href="#42nat" class="table-of-contents__link toc-highlight">4.2、NAT</a><ul><li><a href="#1-什么是-nat一句话解释" class="table-of-contents__link toc-highlight"><strong>1. 什么是 NAT？一句话解释</strong></a></li><li><a href="#2-举个栗子你家电脑如何访问网站" class="table-of-contents__link toc-highlight"><strong>2. 举个栗子：你家电脑如何访问网站？</strong></a></li><li><a href="#3-nat-的四种门卫模式" class="table-of-contents__link toc-highlight"><strong>3. NAT 的四种“门卫模式”</strong></a></li><li><a href="#4-webrtc-如何突破-nat" class="table-of-contents__link toc-highlight"><strong>4. WebRTC 如何突破 NAT？</strong></a></li></ul></li><li><a href="#43stun" class="table-of-contents__link toc-highlight">4.3、STUN</a><ul><li><a href="#1-什么是-stun一句话解释" class="table-of-contents__link toc-highlight"><strong>1. 什么是 STUN？一句话解释</strong></a></li><li><a href="#2-举个栗子stun-如何帮你照镜子" class="table-of-contents__link toc-highlight"><strong>2. 举个栗子：STUN 如何帮你“照镜子”？</strong></a></li><li><a href="#3-stun-的超能力与死穴" class="table-of-contents__link toc-highlight"><strong>3. STUN 的“超能力”与“死穴”</strong></a></li><li><a href="#4-一句话总结-stun-的用途" class="table-of-contents__link toc-highlight"><strong>4. 一句话总结 STUN 的用途</strong></a></li><li><a href="#附公共-stun-服务器直接可用" class="table-of-contents__link toc-highlight"><strong>附：公共 STUN 服务器（直接可用）</strong></a></li></ul></li><li><a href="#44turn" class="table-of-contents__link toc-highlight">4.4、TURN</a></li><li><a href="#45ice" class="table-of-contents__link toc-highlight">4.5、ICE</a></li><li><a href="#46sdp" class="table-of-contents__link toc-highlight">4.6、SDP</a></li><li><a href="#47signaling信令交换" class="table-of-contents__link toc-highlight">4.7、Signaling（信令交换）</a></li><li><a href="#48小结" class="table-of-contents__link toc-highlight">4.8、小结</a><ul><li><a href="#1-信令是什么" class="table-of-contents__link toc-highlight"><strong>1. 信令是什么？</strong></a></li><li><a href="#2-为什么需要信令" class="table-of-contents__link toc-highlight"><strong>2. 为什么需要信令？</strong></a></li><li><a href="#3-信令服务器的作用" class="table-of-contents__link toc-highlight"><strong>3. 信令服务器的作用</strong></a></li><li><a href="#4-stun-和-turn-的作用" class="table-of-contents__link toc-highlight"><strong>4. STUN 和 TURN 的作用</strong></a></li><li><a href="#5-sdp-请求与答复" class="table-of-contents__link toc-highlight"><strong>5. SDP 请求与答复</strong></a></li></ul></li><li><a href="#71-优点" class="table-of-contents__link toc-highlight"><strong>7.1 优点</strong></a><ul><li><a href="#1-p2p-通信的高效性" class="table-of-contents__link toc-highlight"><strong>1. P2P 通信的高效性</strong></a></li><li><a href="#2-标准化-api" class="table-of-contents__link toc-highlight"><strong>2. 标准化 API</strong></a></li></ul></li><li><a href="#72-缺点" class="table-of-contents__link toc-highlight"><strong>7.2 缺点</strong></a><ul><li><a href="#1-依赖-stunturn-服务器" class="table-of-contents__link toc-highlight"><strong>1. 依赖 STUN/TURN 服务器</strong></a></li><li><a href="#2-多人场景扩展性差" class="table-of-contents__link toc-highlight"><strong>2. 多人场景扩展性差</strong></a></li></ul></li><li><a href="#1-核心目标不同" class="table-of-contents__link toc-highlight"><strong>1. 核心目标不同</strong></a></li><li><a href="#2-技术差异" class="table-of-contents__link toc-highlight"><strong>2. 技术差异</strong></a></li><li><a href="#3-依赖关系" class="table-of-contents__link toc-highlight"><strong>3. 依赖关系</strong></a></li><li><a href="#一句话总结-1" class="table-of-contents__link toc-highlight"><strong>一句话总结</strong></a></li></ul></div></div></div></div></div></div></main></div></div></div></div>
</body>
</html>